<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta name="description" content="�������ɣ�������̫��">
<meta property="og:type" content="website">
<meta property="og:title" content="Fatart&#39;s blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Fatart&#39;s blog">
<meta property="og:description" content="�������ɣ�������̫��">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Fatart&#39;s blog">
<meta name="twitter:description" content="�������ɣ�������̫��">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>Fatart's blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Fatart's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/C++ 函数指针/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Fatart's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/C++ 函数指针/" itemprop="url">C++ 函数指针</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-29T12:46:25+08:00">
                2017-08-29
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/C/" itemprop="url" rel="index">
                    <span itemprop="name">C++</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h1><p>程序运行期间，每个函数都会占用一段连续的内存空间。而函数名就是该函数所占内存区域的起始地址(也称“入口地址”)。我们可以将函数的入口地址赋给一个指针变量，使该指针变量指向该函数。然后通过指针变量就可以调用这个函数。这种指向函数的指针变量称为“函数指针”。</p>
<h2 id="定义形式"><a href="#定义形式" class="headerlink" title="定义形式"></a>定义形式</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">类型名 (* 指针变量名)(参数类型1, 参数类型2,…);</div></pre></td></tr></table></figure>
<p>例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">int (*pf)(int ,char);</div></pre></td></tr></table></figure>
<p>表示pf是一个函数指针，它所指向的函数，返回值类型应是int，该函数应有两个参数，第一个是int 类型，第二个是char类型。</p>
<h2 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h2><p>可以用一个原型匹配的函数的名字给一个函数指针赋值。</p>
<p>要通过函数指针调用它所指向的函数，写法为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">函数指针名(实参表);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">#include &lt;stdio.h&gt;</div><div class="line">void PrintMin(int a,int b) &#123;</div><div class="line"> if( a&lt;b )</div><div class="line">    printf(&quot;%d&quot;,a);</div><div class="line"> else</div><div class="line">    printf(&quot;%d&quot;,b);</div><div class="line">&#125;</div><div class="line">int main() &#123;</div><div class="line"> void (* pf)(int ,int);</div><div class="line"> int x = 4, y = 5;</div><div class="line"> pf = PrintMin;</div><div class="line"> pf(x,y); //输出结果4</div><div class="line"> return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="函数指针应用"><a href="#函数指针应用" class="headerlink" title="函数指针应用"></a>函数指针应用</h2><table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>a[0]</td>
<td>a[1]</td>
<td>…</td>
<td>a[i]</td>
<td>…</td>
<td>a[n-1]</td>
</tr>
</tbody>
</table>
<p>C语言快速排序库函数：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">void qsort(void *base, int nelem, unsigned int width,</div><div class="line">int ( * pfCompare)( const void *, const void *));</div></pre></td></tr></table></figure>
<p>可以对任意类型的数组进行排序</p>
<p>对数组排序，需要知道：</p>
<ul>
<li>数组起始地址</li>
<li>数组元素的个数</li>
<li>每个元素的大小（由此可以算出每个元素的地址） </li>
<li>元素谁在前谁在后的规则</li>
</ul>
<p>在函数中</p>
<ul>
<li>base: 待排序数组的起始地址，</li>
<li>nelem: 待排序数组的元素个数，</li>
<li>width: 待排序数组的每个元素的大小（以字节为单位）</li>
<li>pfCompare :比较函数的地址</li>
</ul>
<p>pfCompare: 函数指针，它指向一个“比较函数”。<br>该比较函数应为以下形式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">int 比较函数名(const void * elem1, const void * elem2);</div></pre></td></tr></table></figure>
<p>比较函数是程序员自己编写的</p>
<p>排序就是一个不断比较并交换位置的过程。<br>qsort函数在执行期间，会通过pfCompare指针调用 “比较函数”，调用时将要比较的两个元素的地址传给“比较函数”,然后根据“比较函数”返回值判断两个元素哪个更应该排在前面。</p>
<p>比较函数编写规则：<br>1) 如果 <em> elem1应该排在 </em> elem2前面，则函数返回值是负整数<br>2) 如果 <em> elem1和</em> elem2哪个排在前面都行，那么函数返回0<br>3) 如果 <em> elem1应该排在 </em> elem2后面，则函数返回值是正整数</p>
<h2 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h2><p>下面的程序，功能是调用qsort库函数，将一个unsigned int数组按照个位数从小到大进行排序。比如 8，23，15三个数，按个位数从小到大排序，就应该是 23，15，8</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">#include &lt;stdio.h&gt;</div><div class="line">#include &lt;stdlib.h&gt;</div><div class="line">int MyCompare( const void * elem1, const void * elem2 )</div><div class="line">&#123;</div><div class="line">    unsigned int * p1, * p2;</div><div class="line">    p1 = (unsigned int *) elem1; // “* elem1” 非法，*elem1无定义，需要转换成 unsigned int*</div><div class="line">    p2 = (unsigned int *) elem2; // “* elem2” 非法</div><div class="line">    return (* p1 % 10) - (* p2 % 10 );</div><div class="line">&#125;</div><div class="line">#define NUM 5</div><div class="line">int main()</div><div class="line">&#123;</div><div class="line">    unsigned int an[NUM] = &#123; 8,123,11,10,4 &#125;;</div><div class="line">    qsort( an,NUM,sizeof(unsigned int), MyCompare);</div><div class="line">    for( int i = 0;i &lt; NUM; i ++ )</div><div class="line">    printf(&quot;%d &quot;,an[i]); //输出结果：10 11 123 4 8</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="思考，如果从大到小排序给出程序？"><a href="#思考，如果从大到小排序给出程序？" class="headerlink" title="思考，如果从大到小排序给出程序？"></a>思考，如果从大到小排序给出程序？</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">#include &lt;stdio.h&gt;</div><div class="line">#include &lt;stdlib.h&gt;</div><div class="line">int MyCompare(const void * elem1, const void * elem2)</div><div class="line">&#123;</div><div class="line">	unsigned int * p1, *p2;</div><div class="line">	p1 = (unsigned int *)elem1; // “* elem1” 非法，*elem1无定义，需要转换成 unsigned int*</div><div class="line">	p2 = (unsigned int *)elem2; // “* elem2” 非法</div><div class="line">	return (*p2 % 10) - (*p1 % 10); //不同处</div><div class="line">&#125;</div><div class="line">#define NUM 5</div><div class="line">int main()</div><div class="line">&#123;</div><div class="line">	unsigned int an[NUM] = &#123; 8,123,11,10,4 &#125;;</div><div class="line">	qsort(an, NUM, sizeof(unsigned int), MyCompare);</div><div class="line">	for (int i = 0; i &lt; NUM; i++)</div><div class="line">		printf(&quot;%d &quot;, an[i]); //输出结果：10 11 123 4 8</div><div class="line">	return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/ns3 Building a Wireless Network Topology/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Fatart's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/ns3 Building a Wireless Network Topology/" itemprop="url">ns3 Building a Wireless Network Topology</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-23T18:28:25+08:00">
                2017-08-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/NS3/" itemprop="url" rel="index">
                    <span itemprop="name">NS3</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>详细内容请参考<a href="https://www.nsnam.org/docs/release/3.26/tutorial/html/building-topologies.html" target="_blank" rel="external">ns-3 tutorial</a></p>
<h1 id="Models-Attributes-and-Reality"><a href="#Models-Attributes-and-Reality" class="headerlink" title="Models, Attributes and Reality"></a>Models, Attributes and Reality</h1><p>一个模型在定义上是现实的抽象。最终是由代码的作者决定所谓的“抽象的范围”以及“可用性”。</p>
<p>在某些情况下，比如csma，确定没有被建模的部分是相当容易的。通过阅读模块描述（csma.h）发现其没有冲突检测。</p>
<p>如你所见的，ns-3提供了一些用户能够直接改变模块行为的Attributes。考虑CsmaNetDevice的两个Attributes：MTU和EncapsulationMode。</p>
<p>MTU:Maximum Transmission Unit，这是Protocol Data Unit(PDU)的最大size。在CsmaNetDevice中，MTU默认值为1500bytes</p>
<h1 id="Building-a-Wireless-Network-Topology"><a href="#Building-a-Wireless-Network-Topology" class="headerlink" title="Building a Wireless Network Topology"></a>Building a Wireless Network Topology</h1><p>在这节，我们将拓展对ns-3 网络设备和信道的知识，涉及到组件一个无线网络。ns-3 提供了一系列802.11模型，该模型努力提供一个准确的802.11 MAC-level实现和一个“并不是特别慢”的802.11a PHY-Level实现。</p>
<p>在代码中，如果你改变了nCsma，它将会改变“extra” CSMA节点的数量。相似的，你可以设置nWifi来控制仿真中创建的STA(station)节点数量。在无线网络中有一个AP(Access point)。</p>
<h4 id="include-wifi-and-mobility-headfiles"><a href="#include-wifi-and-mobility-headfiles" class="headerlink" title="include wifi and mobility headfiles"></a>include wifi and mobility headfiles</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">#include &quot;ns3/core-module.h&quot;</div><div class="line">#include &quot;ns3/point-to-point-module.h&quot;</div><div class="line">#include &quot;ns3/network-module.h&quot;</div><div class="line">#include &quot;ns3/applications-module.h&quot;</div><div class="line">#include &quot;ns3/wifi-module.h&quot;</div><div class="line">#include &quot;ns3/mobility-module.h&quot;</div><div class="line">#include &quot;ns3/csma-module.h&quot;</div><div class="line">#include &quot;ns3/internet-module.h&quot;</div></pre></td></tr></table></figure>
<p>将创建的网络topology如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">// Default Network Topology</div><div class="line">//</div><div class="line">//   Wifi 10.1.3.0</div><div class="line">//                 AP</div><div class="line">//  *    *    *    *</div><div class="line">//  |    |    |    |    10.1.1.0</div><div class="line">// n5   n6   n7   n0 -------------- n1   n2   n3   n4(S)</div><div class="line">//          client   point-to-point  |    |    |    |</div><div class="line">//                                   ================</div><div class="line">//                                     LAN 10.1.2.0</div></pre></td></tr></table></figure>
<p>我们在p2p链路的左边添加了一个新的网络设备，为无线网络的AP(Access Point)，新的10.1.3.0 wifi网络具有nwifi个STA(station)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">using namespace ns3; //使用ns3 命名空间</div><div class="line"></div><div class="line">NS_LOG_COMPONENT_DEFINE (&quot;ThirdScriptExample&quot;); //定义log component</div></pre></td></tr></table></figure>
<p>添加command line parameter</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line">bool verbose = true;</div><div class="line">uint32_t nCsma = 3;</div><div class="line">uint32_t nWifi = 3;</div><div class="line"></div><div class="line">CommandLine cmd;</div><div class="line">cmd.AddValue (&quot;nCsma&quot;, &quot;Number of \&quot;extra\&quot; CSMA nodes/devices&quot;, nCsma);</div><div class="line">cmd.AddValue (&quot;nWifi&quot;, &quot;Number of wifi STA devices&quot;, nWifi);</div><div class="line">cmd.AddValue (&quot;verbose&quot;, &quot;Tell echo applications to log if true&quot;, verbose);</div><div class="line"></div><div class="line">cmd.Parse (argc,argv);</div><div class="line"></div><div class="line">if (verbose)</div><div class="line">  &#123;</div><div class="line">    LogComponentEnable(&quot;UdpEchoClientApplication&quot;, LOG_LEVEL_INFO);</div><div class="line">    LogComponentEnable(&quot;UdpEchoServerApplication&quot;, LOG_LEVEL_INFO);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">NodeContainer p2pNodes;  </div><div class="line">p2pNodes.Create (2);  //创建两个p2p节点 N0 N1</div><div class="line"></div><div class="line">PointToPointHelper pointToPoint;</div><div class="line">pointToPoint.SetDeviceAttribute (&quot;DataRate&quot;, StringValue (&quot;5Mbps&quot;)); //设定device参数</div><div class="line">pointToPoint.SetChannelAttribute (&quot;Delay&quot;, StringValue (&quot;2ms&quot;)); //设定channel参数</div><div class="line"></div><div class="line">NetDeviceContainer p2pDevices;</div><div class="line">p2pDevices = pointToPoint.Install (p2pNodes); //安装p2p网络设备</div><div class="line"></div><div class="line">NodeContainer csmaNodes;</div><div class="line">csmaNodes.Add (p2pNodes.Get (1)); //在第二个p2p节点基础上创建一个csma节点 N1</div><div class="line">csmaNodes.Create (nCsma);         //创建“extra” csma node N2  N3 N4</div><div class="line"></div><div class="line">CsmaHelper csma;</div><div class="line">csma.SetChannelAttribute (&quot;DataRate&quot;, StringValue (&quot;100Mbps&quot;));</div><div class="line">csma.SetChannelAttribute (&quot;Delay&quot;, TimeValue (NanoSeconds (6560)));</div><div class="line"></div><div class="line">NetDeviceContainer csmaDevices;</div><div class="line">csmaDevices = csma.Install (csmaNodes); //安装csma网络设备</div><div class="line"></div><div class="line">NodeContainer wifiStaNodes;   //声明wifi节点</div><div class="line">wifiStaNodes.Create (nWifi);  //创建nwifi个 STA节点 N5 N6 N7</div><div class="line">NodeContainer wifiApNode = p2pNodes.Get (0); //在p2p第1个节点上创建一个wifiAp节点N0</div><div class="line"></div><div class="line">YansWifiChannelHelper channel = YansWifiChannelHelper::Default ();</div><div class="line">YansWifiPhyHelper phy = YansWifiPhyHelper::Default ();</div></pre></td></tr></table></figure>
<p>为了简单起见，代码使用了默认的PHY layer配置和channe 模型。</p>
<p>创建一个channel对象并将其和PHY layer对象联系起来，确保YansWifiPhyHelper创建的PHY level对象共享相同的底层信道，这样，他们共享相同信道才能通信和互相干扰。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">phy.SetChannel (channel.Create ());</div></pre></td></tr></table></figure>
<p>一旦PHY helper配置完成，我们将要配置MAC layer</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">WifiHelper wifi = WifiHelper::Default ();</div><div class="line">wifi.SetRemoteStationManager (&quot;ns3::AarfWifiManager&quot;); //使用 AARF algorithm</div><div class="line"></div><div class="line">NqosWifiMacHelper mac = NqosWifiMacHelper::Default ();</div></pre></td></tr></table></figure>
<p>配置type of MAC</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Ssid ssid = Ssid (&quot;ns-3-ssid&quot;);</div><div class="line">mac.SetType (&quot;ns3::StaWifiMac&quot;,</div><div class="line">  &quot;Ssid&quot;, SsidValue (ssid),</div><div class="line">  &quot;ActiveProbing&quot;, BooleanValue (false));</div></pre></td></tr></table></figure>
<p>代码首先创建了一个802.11SSID(service set identifier)，我们用它来设定MAC layer的SSid的参数。</p>
<p>使用“ns3::StaWifiMac”设定mac layer的类型，这里是STA类型。</p>
<p>NqosWifiMacHelper将会确保创建的MAC对象不具备Attributs-QosSupported功能。</p>
<p>上面两点说明：创建了一个non-Qos non-AP station（STA）。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">NetDeviceContainer staDevices;</div><div class="line">staDevices = wifi.Install (phy, mac, wifiStaNodes); //在STA device上设定phy，mac，node</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">mac.SetType (&quot;ns3::ApWifiMac&quot;,          //设定Ap 类型的mac</div><div class="line">             &quot;Ssid&quot;, SsidValue (ssid));</div><div class="line">NetDeviceContainer apDevices;</div><div class="line">apDevices = wifi.Install (phy, mac, wifiApNode); //安装于AP node之上</div></pre></td></tr></table></figure>
<h3 id="移动模块"><a href="#移动模块" class="headerlink" title="移动模块"></a>移动模块</h3><p>我们希望STA节点是移动的，在一个有限的box里移动。我们希望AP node是固定的，使用MobilityHelper实现。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">MobilityHelper mobility;</div><div class="line"></div><div class="line">mobility.SetPositionAllocator (&quot;ns3::GridPositionAllocator&quot;,</div><div class="line">  &quot;MinX&quot;, DoubleValue (0.0),</div><div class="line">  &quot;MinY&quot;, DoubleValue (0.0),</div><div class="line">  &quot;DeltaX&quot;, DoubleValue (5.0),</div><div class="line">  &quot;DeltaY&quot;, DoubleValue (10.0),</div><div class="line">  &quot;GridWidth&quot;, UintegerValue (3),</div><div class="line">  &quot;LayoutType&quot;, StringValue (&quot;RowFirst&quot;));</div></pre></td></tr></table></figure>
<p>告知MobilityHelper使用一个2维grid来初始放置STA节点。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">mobility.SetMobilityModel (&quot;ns3::RandomWalk2dMobilityModel&quot;,</div><div class="line">  &quot;Bounds&quot;, RectangleValue (Rectangle (-50, 50, -50, 50)));</div><div class="line">  </div><div class="line">  mobility.Install (wifiStaNodes);</div></pre></td></tr></table></figure>
<p>We have arranged our nodes on an initial grid, but now we need to tell them how to move. We choose the RandomWalk2dMobilityModel which has the nodes move in a random direction at a random speed around inside a bounding box.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mobility.SetMobilityModel (&quot;ns3::ConstantPositionMobilityModel&quot;);</div><div class="line">mobility.Install (wifiApNode);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">InternetStackHelper stack;</div><div class="line">stack.Install (csmaNodes);</div><div class="line">stack.Install (wifiApNode);</div><div class="line">stack.Install (wifiStaNodes);</div></pre></td></tr></table></figure>
<p>install stack</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">Ipv4AddressHelper address;</div><div class="line"></div><div class="line">address.SetBase (&quot;10.1.1.0&quot;, &quot;255.255.255.0&quot;);</div><div class="line">Ipv4InterfaceContainer p2pInterfaces;</div><div class="line">p2pInterfaces = address.Assign (p2pDevices);</div><div class="line"></div><div class="line">address.SetBase (&quot;10.1.2.0&quot;, &quot;255.255.255.0&quot;);</div><div class="line">Ipv4InterfaceContainer csmaInterfaces;</div><div class="line">csmaInterfaces = address.Assign (csmaDevices);</div><div class="line"></div><div class="line">address.SetBase (&quot;10.1.3.0&quot;, &quot;255.255.255.0&quot;);</div><div class="line">address.Assign (staDevices); //先分配的stadevice 所以 sta地址从 10.1.3.1~ 10.1.3.3</div><div class="line">address.Assign (apDevices);  //ap IP 10.1.3.4</div></pre></td></tr></table></figure>
<p>assign IP</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">UdpEchoServerHelper echoServer (9);</div><div class="line"></div><div class="line">ApplicationContainer serverApps = echoServer.Install (csmaNodes.Get (nCsma));</div><div class="line">serverApps.Start (Seconds (1.0));</div><div class="line">serverApps.Stop (Seconds (10.0));</div><div class="line">UdpEchoClientHelper echoClient (csmaInterfaces.GetAddress (nCsma), 9);</div><div class="line">echoClient.SetAttribute (&quot;MaxPackets&quot;, UintegerValue (1));</div><div class="line">echoClient.SetAttribute (&quot;Interval&quot;, TimeValue (Seconds (1.0)));</div><div class="line">echoClient.SetAttribute (&quot;PacketSize&quot;, UintegerValue (1024));</div><div class="line"></div><div class="line">ApplicationContainer clientApps =</div><div class="line">  echoClient.Install (wifiStaNodes.Get (nWifi - 1));</div><div class="line">clientApps.Start (Seconds (2.0));</div><div class="line">clientApps.Stop (Seconds (10.0));</div></pre></td></tr></table></figure>
<p>install AP</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Ipv4GlobalRoutingHelper::PopulateRoutingTables ();</div></pre></td></tr></table></figure>
<p>enable global routing</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">pointToPoint.EnablePcapAll (&quot;third&quot;);</div><div class="line">phy.EnablePcap (&quot;third&quot;, apDevices.Get (0));</div><div class="line">csma.EnablePcap (&quot;third&quot;, csmaDevices.Get (0), true);</div></pre></td></tr></table></figure>
<p>enable pcap</p>
<h2 id="运行代码"><a href="#运行代码" class="headerlink" title="运行代码"></a>运行代码</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ ./waf --run scratch/third</div><div class="line"></div><div class="line">$ ./waf --run scratch/third --vis  //带python图像</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">At time 2s client sent 1024 bytes to 10.1.2.4 port 9</div><div class="line">At time 2.01796s server received 1024 bytes from 10.1.3.3 port 49153</div><div class="line">At time 2.01796s server sent 1024 bytes to 10.1.3.3 port 49153</div><div class="line">At time 2.03364s client received 1024 bytes from 10.1.2.4 port 9</div></pre></td></tr></table></figure>
<p>在文件夹里存在4个pcap文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">third-0-0.pcap  third-0-1.pcap  third-1-0.pcap  third-1-1.pcap</div></pre></td></tr></table></figure>
<p>third-0-0.pcap： Node 0 - PointToPoint Netdevice<br>third-0-1.pcap： Node 0 - Wifi Netdevice<br>third-1-0.pcap： Node 1 - PointToPoint Netdevice<br>third-1-1.pcap： Node 1 - Csma Netdevice</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">$ tcpdump -nn -tt -r third-0-1.pcap</div><div class="line">reading from file third-0-1.pcap, link-type IEEE802_11 (802.11)</div><div class="line">0.000025 Beacon (ns-3-ssid) [6.0* 9.0 12.0 18.0 24.0 36.0 48.0 54.0 Mbit] IBSS</div><div class="line">0.000308 Assoc Request (ns-3-ssid) [6.0 9.0 12.0 18.0 24.0 36.0 48.0 54.0 Mbit]</div><div class="line">0.000324 Acknowledgment RA:00:00:00:00:00:08</div><div class="line">0.000402 Assoc Response AID(0) :: Successful</div><div class="line">0.000546 Acknowledgment RA:00:00:00:00:00:0a</div><div class="line">0.000721 Assoc Request (ns-3-ssid) [6.0 9.0 12.0 18.0 24.0 36.0 48.0 54.0 Mbit]</div><div class="line">0.000737 Acknowledgment RA:00:00:00:00:00:07</div><div class="line">0.000824 Assoc Response AID(0) :: Successful</div><div class="line">0.000968 Acknowledgment RA:00:00:00:00:00:0a</div><div class="line">0.001134 Assoc Request (ns-3-ssid) [6.0 9.0 12.0 18.0 24.0 36.0 48.0 54.0 Mbit]</div><div class="line">0.001150 Acknowledgment RA:00:00:00:00:00:09</div><div class="line">0.001273 Assoc Response AID(0) :: Successful</div><div class="line">0.001417 Acknowledgment RA:00:00:00:00:00:0a</div><div class="line">0.102400 Beacon (ns-3-ssid) [6.0* 9.0 12.0 18.0 24.0 36.0 48.0 54.0 Mbit] IBSS</div><div class="line">0.204800 Beacon (ns-3-ssid) [6.0* 9.0 12.0 18.0 24.0 36.0 48.0 54.0 Mbit] IBSS</div><div class="line">0.307200 Beacon (ns-3-ssid) [6.0* 9.0 12.0 18.0 24.0 36.0 48.0 54.0 Mbit] IBSS</div><div class="line"></div><div class="line">$ tcpdump -nn -tt -r third-0-0.pcap</div><div class="line">reading from file third-0-0.pcap, link-type PPP (PPP)</div><div class="line">2.008151 IP 10.1.3.3.49153 &gt; 10.1.2.4.9: UDP, length 1024</div><div class="line">2.026758 IP 10.1.2.4.9 &gt; 10.1.3.3.49153: UDP, length 1024</div><div class="line"></div><div class="line">$ tcpdump -nn -tt -r third-1-0.pcap</div><div class="line">reading from file third-1-0.pcap, link-type PPP (PPP)</div><div class="line">2.011837 IP 10.1.3.3.49153 &gt; 10.1.2.4.9: UDP, length 1024</div><div class="line">2.023072 IP 10.1.2.4.9 &gt; 10.1.3.3.49153: UDP, length 1024</div><div class="line"></div><div class="line">$ tcpdump -nn -tt -r third-1-1.pcap</div><div class="line">reading from file third-1-1.pcap, link-type EN10MB (Ethernet)</div><div class="line">2.017837 ARP, Request who-has 10.1.2.4 (ff:ff:ff:ff:ff:ff) tell 10.1.2.1, length 50</div><div class="line">2.017861 ARP, Reply 10.1.2.4 is-at 00:00:00:00:00:06, length 50</div><div class="line">2.017861 IP 10.1.3.3.49153 &gt; 10.1.2.4.9: UDP, length 1024</div><div class="line">2.022966 ARP, Request who-has 10.1.2.1 (ff:ff:ff:ff:ff:ff) tell 10.1.2.4, length 50</div><div class="line">2.022966 ARP, Reply 10.1.2.1 is-at 00:00:00:00:00:03, length 50</div><div class="line">2.023072 IP 10.1.2.4.9 &gt; 10.1.3.3.49153: UDP, length 1024</div></pre></td></tr></table></figure>
<h1 id="修改MobilityModel-trace-source"><a href="#修改MobilityModel-trace-source" class="headerlink" title="修改MobilityModel trace source"></a>修改MobilityModel trace source</h1><p>我们通过和MobilityModel的 course change trace source</p>
<p>ns3 trace system 分成 trace source 和 trace sinks，我们提供函数连接这两个。我们将使用mobility model预先定义的course change trace souce来发起trace 时间。</p>
<p>我们将需要写一个trace sink和source连接，这个sink将会为我们显式一些数据。</p>
<p>我们可以在<a href="https://www.nsnam.org/docs/release/3.26/doxygen/classns3_1_1_mobility_model.html" target="_blank" rel="external">API</a>中，找到mobility model的trace source。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">TraceSources</div><div class="line">- CourseChange ：The value of the position and/or velocity vector changed</div><div class="line">Callback signature: ns3::MobilityModel::TracedCallback</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Config Paths</div><div class="line"></div><div class="line">ns3::MobilityModel is accessible through the following paths with Config::Set and Config::Connect:</div><div class="line"></div><div class="line">&quot;/NodeList/[i]/$ns3::MobilityModel&quot;</div></pre></td></tr></table></figure>
<p>在 NS_LOG_COMPONENT_DEFINE后添加如下代码（trace sink）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">void</div><div class="line">CourseChange (std::string context, Ptr&lt;const MobilityModel&gt; model)</div><div class="line">&#123;</div><div class="line">  Vector position = model-&gt;GetPosition ();</div><div class="line">  NS_LOG_UNCOND (context &lt;&lt;</div><div class="line">    &quot; x = &quot; &lt;&lt; position.x &lt;&lt; &quot;, y = &quot; &lt;&lt; position.y);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>我们会在每一此STA位置变化的情况下输出位置，使用用Config::Connect，在Simulator::Run前加：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">std::ostringstream oss;</div><div class="line">oss &lt;&lt;</div><div class="line">  &quot;/NodeList/&quot; &lt;&lt; wifiStaNodes.Get (nWifi - 1)-&gt;GetId () &lt;&lt;</div><div class="line">  &quot;/$ns3::MobilityModel/CourseChange&quot;;</div><div class="line"></div><div class="line">Config::Connect (oss.str (), MakeCallback (&amp;CourseChange));</div></pre></td></tr></table></figure>
<p>在<a href="https://www.nsnam.org/docs/release/3.26/doxygen/group__config.html#ga4014f151241cd0939b6cb64409605736" target="_blank" rel="external">API</a>中查看得到的connect函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">void ns3::Config::Connect(std::string path, const CallbackBase &amp; cb)</div><div class="line"></div><div class="line">Parameters</div><div class="line">   [in] path  A path to match trace sources</div><div class="line">   [in] cb    The callback to connect to the matching trace sources</div></pre></td></tr></table></figure>
<p>我们可以看到在代码中第一个输入参数为 trace source的访问链接，使用ostringstream::str得到例如以下的形式（和API中的形式一致），指向的是NodeList的第7个节点</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/NodeList/7/$ns3::MobilityModel/CourseChange</div></pre></td></tr></table></figure>
<p>我们将node 7 的trace source和我们编写的trace sink函数（coursechange）链接起来，使用Config::Connect函数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">&apos;build&apos; finished successfully (5.989s)</div><div class="line">/NodeList/7/$ns3::MobilityModel/CourseChange x = 10, y = 0</div><div class="line">/NodeList/7/$ns3::MobilityModel/CourseChange x = 10.3841, y = 0.923277</div><div class="line">/NodeList/7/$ns3::MobilityModel/CourseChange x = 10.2049, y = 1.90708</div><div class="line">/NodeList/7/$ns3::MobilityModel/CourseChange x = 10.8136, y = 1.11368</div><div class="line">/NodeList/7/$ns3::MobilityModel/CourseChange x = 10.8452, y = 2.11318</div><div class="line">/NodeList/7/$ns3::MobilityModel/CourseChange x = 10.9797, y = 3.10409</div><div class="line">At time 2s client sent 1024 bytes to 10.1.2.4 port 9</div><div class="line">At time 2.01796s server received 1024 bytes from 10.1.3.3 port 49153</div><div class="line">At time 2.01796s server sent 1024 bytes to 10.1.3.3 port 49153</div><div class="line">At time 2.03364s client received 1024 bytes from 10.1.2.4 port 9</div><div class="line">/NodeList/7/$ns3::MobilityModel/CourseChange x = 11.3273, y = 4.04175</div><div class="line">/NodeList/7/$ns3::MobilityModel/CourseChange x = 12.013, y = 4.76955</div><div class="line">/NodeList/7/$ns3::MobilityModel/CourseChange x = 12.4317, y = 5.67771</div><div class="line">/NodeList/7/$ns3::MobilityModel/CourseChange x = 11.4607, y = 5.91681</div><div class="line">/NodeList/7/$ns3::MobilityModel/CourseChange x = 12.0155, y = 6.74878</div><div class="line">/NodeList/7/$ns3::MobilityModel/CourseChange x = 13.0076, y = 6.62336</div><div class="line">/NodeList/7/$ns3::MobilityModel/CourseChange x = 12.6285, y = 5.698</div><div class="line">/NodeList/7/$ns3::MobilityModel/CourseChange x = 13.32, y = 4.97559</div><div class="line">/NodeList/7/$ns3::MobilityModel/CourseChange x = 13.1134, y = 3.99715</div><div class="line">/NodeList/7/$ns3::MobilityModel/CourseChange x = 13.8359, y = 4.68851</div><div class="line">/NodeList/7/$ns3::MobilityModel/CourseChange x = 13.5953, y = 3.71789</div><div class="line">/NodeList/7/$ns3::MobilityModel/CourseChange x = 12.7595, y = 4.26688</div><div class="line">/NodeList/7/$ns3::MobilityModel/CourseChange x = 11.7629, y = 4.34913</div><div class="line">/NodeList/7/$ns3::MobilityModel/CourseChange x = 11.2292, y = 5.19485</div><div class="line">/NodeList/7/$ns3::MobilityModel/CourseChange x = 10.2344, y = 5.09394</div><div class="line">/NodeList/7/$ns3::MobilityModel/CourseChange x = 9.3601, y = 4.60846</div><div class="line">/NodeList/7/$ns3::MobilityModel/CourseChange x = 8.40025, y = 4.32795</div><div class="line">/NodeList/7/$ns3::MobilityModel/CourseChange x = 9.14292, y = 4.99761</div><div class="line">/NodeList/7/$ns3::MobilityModel/CourseChange x = 9.08299, y = 5.99581</div><div class="line">/NodeList/7/$ns3::MobilityModel/CourseChange x = 8.26068, y = 5.42677</div><div class="line">/NodeList/7/$ns3::MobilityModel/CourseChange x = 8.35917, y = 6.42191</div><div class="line">/NodeList/7/$ns3::MobilityModel/CourseChange x = 7.66805, y = 7.14466</div><div class="line">/NodeList/7/$ns3::MobilityModel/CourseChange x = 6.71414, y = 6.84456</div><div class="line">/NodeList/7/$ns3::MobilityModel/CourseChange x = 6.42489, y = 7.80181</div></pre></td></tr></table></figure>
<h1 id="Config-path-Tips"><a href="#Config-path-Tips" class="headerlink" title="Config path Tips"></a>Config path Tips</h1><p>Suppose you type in:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">oss &lt;&lt; &quot;/NodeList/&quot; &lt;&lt; wifiStaNodes.Get (nWifi - 1)-&gt;GetId () &lt;&lt; “$ns-3::MobilityModel/CourseChange&quot;;</div></pre></td></tr></table></figure>
<p>instead of </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">oss &lt;&lt; &quot;/NodeList/&quot; &lt;&lt; wifiStaNodes.Get (nWifi - 1)-&gt;GetId () &lt;&lt; &quot;/$ns-3::MobilityModel/CourseChange&quot;;</div></pre></td></tr></table></figure>
<p><strong>With the first version： no error message， but none of the “/NodeList/7/$ns-3::MobilityModel/CourseChange x = …, y = …” are printed out!!</strong></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/Modal verb-would have, could have, should have/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Fatart's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/Modal verb-would have, could have, should have/" itemprop="url">Modal verb-would have, could have, should have</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-21T19:06:44+08:00">
                2017-08-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/TOEFL/" itemprop="url" rel="index">
                    <span itemprop="name">TOEFL</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="https://learningenglish.voanews.com/pp/3391163/ppt0.html" target="_blank" rel="external">voice player</a></p>
<p>Today we will take a look at the <strong>modal</strong> verbs could have, would have and should have. These past tense modals are useful for expressing your present feelings about a past decision (or other action).</p>
<p><em>Could have</em>, <em>would have</em>, and <em>should have</em> are sometimes called “modals of lost opportunities.” They work like a grammatical time machine. The simple past just tells what happened. Past modals tell what could have, would have, and should have happened.</p>
<p>To form these past modals, use could, would, or should followed by have, followed by a past participle verb. Use have for all pronouns; never use has or had to form a past modal. Here are some examples:</p>
<ul>
<li><p>She could have gone to any college she wanted to. </p>
<p>她本来能够去她想去的大学</p>
</li>
<li><p>I would have gone to the party, but I was tired.</p>
<p>我本想去party，但我累了。</p>
</li>
<li><p>He should have told the truth about what he saw.</p>
<p>他本该说出他看到的。</p>
</li>
</ul>
<p>Each of these modals has a slightly different meaning. We’ll look at each of them using examples from movies and popular songs.</p>
<h1 id="Could-have-本来能够"><a href="#Could-have-本来能够" class="headerlink" title="Could have 本来能够"></a>Could have 本来能够</h1><p>We’ll start with <em>could have</em>. <em>Could have</em> means that something was possible in the past, but it did not happen.</p>
<ul>
<li>I could have gone directly to college, but I decided to travel for a year.</li>
</ul>
<p>Listen to this song by 1980s teen pop star Tiffany. The singer is thinking about past possibilities with her lost love.</p>
<ul>
<li><p>Could have been so beautiful</p>
</li>
<li><p>Could have been so right</p>
</li>
<li><p>Could have been my lover</p>
</li>
<li><p>Every day of my life</p>
</li>
</ul>
<p>Native speakers often do not pronounce their past tense modals as clearly as Tiffany. Could have been usually gets <em>contracted</em> to could’ve been or even coulda’ been.</p>
<p>Listen to Marlon Brando in the classic film “On the <strong>Waterfront</strong>.” Brando’s character, Terry Malloy, was once a promising young boxer.</p>
<ul>
<li>“You don’t understand. I coulda’ had class. I coulda’ been a <strong>contender</strong>. I could have been somebody—instead of a <strong>bum</strong>.”</li>
</ul>
<p>To form the negative with these modals, use not between could and have. Could not have means that something was impossible in the past. For example:</p>
<ul>
<li><p>She could not have been on that flight because I just saw her at work.</p>
<p>她绝不可能在飞机上，因为我看见她在工作。</p>
</li>
</ul>
<p>Defense lawyers often use could not have to argue for a client’s innocence.</p>
<p>A popular <strong>compliment</strong> in English is, “<strong>I couldn’t have said it better myself.</strong>” You can say this when you like the way somebody said something. It is a way to show strong agreement.</p>
<h1 id="Would-have"><a href="#Would-have" class="headerlink" title="Would have"></a>Would have</h1><p>Let’s move on to would have.</p>
<p>Would have is a bit more difficult because it has two common structures. The first is with but. I would have A, but I had to B. Use this structure to show that you wanted to do something in the past, but you could not.</p>
<ul>
<li><p>I would have called, <em>but</em> there was no phone service.</p>
<p>我本想打电话，但那里无服务。</p>
</li>
<li><p>I would have loaned you the money, ++but++ I didn’t have any.</p>
<p>我本想贷你钱，但我自己都没有。</p>
</li>
</ul>
<p>Would have also forms the result clause of a past unreal conditional.过去没发生的事情</p>
<h3 id="For-example"><a href="#For-example" class="headerlink" title="For example:"></a>For example:</h3><ul>
<li><p>If I had known they were vegetarians, I would have made a salad.</p>
<p> 如果我知道他们都是素食主义者，我就做一些沙拉了。</p>
</li>
</ul>
<p>You can always reverse conditional sentences. If would have comes first, there is no comma.</p>
<ul>
<li><p>I would have made a salad if I had known they were vegetarians.</p>
<p>如果我知道他们都是素食主义者，我就做一些沙拉了</p>
</li>
</ul>
<p>Past unreal conditionals are very complex; you can learn more about them on a previous episode of <a href="https://learningenglish.voanews.com/a/past-unreal-conditionals/3181755.html" target="_blank" rel="external">Everyday Grammar</a>.</p>
<p>Usually, <em>would have</em> suggests a bad feeling about the past. But not always. In this song by the band Chicago, the singer is surprisingly happy that his ex-girlfriend cheated on him. Her <strong>infidelity</strong> gave him the opportunity to meet someone else. And that someone else turned out to be his true love.</p>
<ul>
<li><p>If she would have been faithful</p>
</li>
<li><p>If she could have been true</p>
</li>
<li><p>Then I wouldn’ta been cheated</p>
</li>
<li><p>I would never know real love</p>
</li>
<li><p>I would’ve missed out on you</p>
</li>
</ul>
<h1 id="Should-have"><a href="#Should-have" class="headerlink" title="Should have"></a>Should have</h1><p>Finally, let’s look at should have. Should have means that something did not happen, but we wish it had happened. We use should have to talk about past mistakes. A worried mother might say:</p>
<ul>
<li>“I was so worried about you. You should have called!”</li>
</ul>
<p>Should have is common in apologies. For example:</p>
<ul>
<li>I’m sorry that I’m late for work. I should have woken up earlier.</li>
</ul>
<p>You might remember Lieutenant Dan in the movie Forrest Gump. In the movie, Dan loses both of his legs in the Vietnam War. He would have died, but Forrest saved him.</p>
<p>Listen for should have as Dan <strong>confronts</strong> Forrest.</p>
<p>“You listen to me. We all have a <strong>destiny</strong>. Nothing just happens. It’s all part of a plan. I should have died out there with my men. But now I’m nothing but a <strong>cripple</strong>!”</p>
<p>Should have can be used in a light-hearted way. In this song, country singer Toby Keith imagines how exciting his life would be if he had chosen to be a cowboy.</p>
<ul>
<li><p>I should’ve been a cowboy</p>
</li>
<li><p>I should’ve learned to rope and ride</p>
</li>
<li><p>Wearing my <strong>six-shooter</strong></p>
</li>
<li><p>Riding my pony on a cattle drive</p>
</li>
</ul>
<p>I couldn’t have said it better myself. As you can see, these modals of lost opportunities offer a colorful way to talk about past choices.</p>
<p><img src="https://gdb.voanews.com/E3483FCB-75A1-477C-B1B5-2EC244003527_w650_r0_s.png" alt="image"></p>
<h1 id="Words-in-This-Story"><a href="#Words-in-This-Story" class="headerlink" title="Words in This Story"></a>Words in This Story</h1><ul>
<li><p>modal verb /ˈmoʊdl/ – n. a verb (such as can, could, shall, should, ought to, will, or would) that is usually used with another verb to express ideas such as possibility, necessity, and permission\</p>
</li>
<li><p>waterfront /ˈwɑːtərfrʌnt/ - n. a part of a town or an area that is next to water</p>
</li>
<li><p>contender /kənˈtendər/ – n. a person who tries to win something in a game or competition</p>
</li>
<li><p>bum /bʌm/ – n. a person who is lazy or who does something badly</p>
</li>
<li><p>compliment /ˈkɒmplɪmənt/ – n. a comment that says something good about someone or something</p>
</li>
<li><p>destiny /ˈdestɪni/ - n. the things that will happen to someone in the future, especially those that cannot be changed or controlled, syn = fate</p>
</li>
<li><p>vegetarian /ˌvedʒɪˈteəriən/ – n. a person who does not eat meat</p>
</li>
<li><p>infidelity /ˌɪnfɪˈdeləti/ – n. the act or fact of having a romantic or sexual relationship with someone other than your husband, wife, or partner</p>
</li>
<li><p>confront /kənˈfrʌnt/ – v. to oppose someone, especially in a direct and forceful way</p>
</li>
<li><p>cripple /ˈkrɪpəl/ – n. a person who cannot move or walk normally because of a permanent injury or other physical problem</p>
</li>
<li><p>six-shooter /ˈʃuːtə / – n. a kind of gun (called a revolver) that can hold six bullets (often used to describe guns used in the old American West)</p>
</li>
<li><p>cattle drive /ˈkætl/ – n. the process of moving cows from one place to another</p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/ns3 Building Topologies/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Fatart's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/ns3 Building Topologies/" itemprop="url">ns3 Building Topologies second.cc</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-21T18:28:25+08:00">
                2017-08-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/NS3/" itemprop="url" rel="index">
                    <span itemprop="name">NS3</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>详细内容请参考<a href="https://www.nsnam.org/docs/release/3.26/tutorial/html/building-topologies.html" target="_blank" rel="external">ns-3 tutorial</a></p>
<h1 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h1><p>ns-3的CSMA device以一个简单以太网建模。一个实际的以太网使用CSMA/CD（Carrier Sense Multiple Access with Collision Detection）方案，有着指数增加的回退backoff以竞争（contend for）共享的传输媒介。</p>
<p>The file opens in  second.cc.</p>
<h4 id="首先还是include-一些头文件"><a href="#首先还是include-一些头文件" class="headerlink" title="首先还是include 一些头文件"></a>首先还是include 一些头文件</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">#include &quot;ns3/core-module.h&quot;</div><div class="line">#include &quot;ns3/network-module.h&quot;</div><div class="line">#include &quot;ns3/csma-module.h&quot;</div><div class="line">#include &quot;ns3/internet-module.h&quot;</div><div class="line">#include &quot;ns3/point-to-point-module.h&quot;</div><div class="line">#include &quot;ns3/applications-module.h&quot;</div><div class="line">#include &quot;ns3/ipv4-global-routing-helper.h&quot;</div></pre></td></tr></table></figure>
<h4 id="可见将要创建的网络拓扑如下所示"><a href="#可见将要创建的网络拓扑如下所示" class="headerlink" title="可见将要创建的网络拓扑如下所示"></a>可见将要创建的网络拓扑如下所示</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">// Default Network Topology</div><div class="line">//</div><div class="line">//       10.1.1.0</div><div class="line">// n0 -------------- n1   n2   n3   n4</div><div class="line">//    point-to-point  |    |    |    |</div><div class="line">//                    ================</div><div class="line">//                      LAN 10.1.2.0</div></pre></td></tr></table></figure>
<p>使用命名空间，并定义Log_Component</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">using namespace ns3;</div><div class="line"></div><div class="line">NS_LOG_COMPONENT_DEFINE (&quot;SecondScriptExample&quot;);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">bool verbose = true;</div><div class="line">uint32_t nCsma = 3;</div><div class="line"></div><div class="line">CommandLine cmd;</div><div class="line">cmd.AddValue (&quot;nCsma&quot;, &quot;Number of \&quot;extra\&quot; CSMA nodes/devices&quot;, nCsma);</div><div class="line">cmd.AddValue (&quot;verbose&quot;, &quot;Tell echo applications to log if true&quot;, verbose);</div><div class="line"></div><div class="line">cmd.Parse (argc, argv);</div><div class="line"></div><div class="line">if (verbose)</div><div class="line">  &#123;</div><div class="line">    LogComponentEnable(&quot;UdpEchoClientApplication&quot;, LOG_LEVEL_INFO);</div><div class="line">    LogComponentEnable(&quot;UdpEchoServerApplication&quot;, LOG_LEVEL_INFO);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">nCsma = nCsma == 0 ? 1 : nCsma;</div></pre></td></tr></table></figure>
<p>定义一个verbose flag来开启或关闭，UdpEchoClientApp和UdoEchoServerApp</p>
<p>为command line argument system 添加一个 nCsma 参数，代表 其他csma设备数量</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">NodeContainer p2pNodes;</div><div class="line">p2pNodes.Create (2);</div></pre></td></tr></table></figure>
<p>创建两个p2p node</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">NodeContainer csmaNodes;</div><div class="line">csmaNodes.Add (p2pNodes.Get (1)); //在一个p2p节点上创建一个csma节点</div><div class="line">csmaNodes.Create (nCsma);         //创建nCsma个节点</div></pre></td></tr></table></figure>
<p>在<a href="https://www.nsnam.org/docs/release/3.26/doxygen/classns3_1_1_node_container.html#a9ed96e2ecc22e0f5a3d4842eb9bf90bf" target="_blank" rel="external">API</a>中，查看Get 函数。</p>
<p><strong>Ptr&lt; Node &gt; ns3::NodeContainer::Get    (    uint32_t     i    )    const</strong></p>
<p>Get the Ptr<node> stored in this container at a given index.<br>使用一个给定的index得到存在container中的Ptr<node>智能指针。</node></node></p>
<p><strong>Parameters</strong></p>
<p> i    the index of the requested node pointer.</p>
<p><strong>Returns</strong></p>
<p>the requested node pointer.</p>
<p>Nodes can be retrieved from the container in two ways. First, directly by an index into the container, and second, using an iterator. This method is used in the direct method and is used to retrieve the indexed Ptr<appliation>.</appliation></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">uint32_t nNodes = container.GetN ();  //得到container中存在的节点数目</div><div class="line">for (uint32_t i = 0 i &lt; nNodes; ++i)</div><div class="line">  &#123;</div><div class="line">    Ptr&lt;Node&gt; p = container.Get (i)</div><div class="line">    i-&gt;method ();  // some Node method</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">PointToPointHelper pointToPoint;  </div><div class="line">pointToPoint.SetDeviceAttribute (&quot;DataRate&quot;, StringValue (&quot;5Mbps&quot;));</div><div class="line">pointToPoint.SetChannelAttribute (&quot;Delay&quot;, StringValue (&quot;2ms&quot;));</div><div class="line"></div><div class="line">NetDeviceContainer p2pDevices;</div><div class="line">p2pDevices = pointToPoint.Install (p2pNodes);</div></pre></td></tr></table></figure>
<p>初始化一个PointToPointHelper对象，并设置Device和Channel参数，DataRate 5Mbps 和 Delay 2ms。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">CsmaHelper csma;</div><div class="line">csma.SetChannelAttribute (&quot;DataRate&quot;, StringValue (&quot;100Mbps&quot;));</div><div class="line">csma.SetChannelAttribute (&quot;Delay&quot;, TimeValue (NanoSeconds (6560)));</div><div class="line"></div><div class="line">NetDeviceContainer csmaDevices;</div><div class="line">csmaDevices = csma.Install (csmaNodes);  </div><div class="line"></div><div class="line">InternetStackHelper stack;</div><div class="line">stack.Install (p2pNodes.Get (0));</div><div class="line">stack.Install (csmaNodes);</div><div class="line"></div><div class="line">//使用IPv4AddressHelper分配Ip地址</div><div class="line"></div><div class="line">Ipv4AddressHelper address;</div><div class="line">address.SetBase (&quot;10.1.1.0&quot;, &quot;255.255.255.0&quot;);</div><div class="line">Ipv4InterfaceContainer p2pInterfaces;</div><div class="line">p2pInterfaces = address.Assign (p2pDevices);</div><div class="line"></div><div class="line">address.SetBase (&quot;10.1.2.0&quot;, &quot;255.255.255.0&quot;);</div><div class="line">Ipv4InterfaceContainer csmaInterfaces;</div><div class="line">csmaInterfaces = address.Assign (csmaDevices);</div></pre></td></tr></table></figure>
<p>在API中查看<a href="https://www.nsnam.org/docs/release/3.26/doxygen/classns3_1_1_ipv4_address_helper.html" target="_blank" rel="external">Ipv4AddressHelper</a>,和<a href="https://www.nsnam.org/docs/release/3.26/doxygen/classns3_1_1_ipv4_interface_container.html#af501b5fa9d6e1cc316ba259609da608e" target="_blank" rel="external">Ipv4InterfaceContainer</a>.</p>
<p>添加APP</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">UdpEchoServerHelper echoServer (9);</div><div class="line"></div><div class="line">ApplicationContainer serverApps = echoServer.Install (csmaNodes.Get (nCsma));</div><div class="line">serverApps.Start (Seconds (1.0));</div><div class="line">serverApps.Stop (Seconds (10.0));</div></pre></td></tr></table></figure>
<p>在前文 csma container 装有一个p2p node 和 nCsma 个 extra nodes。</p>
<p>所以</p>
<ul>
<li><p>.Get(0) -&gt; p2p node ptr</p>
</li>
<li><p>.Get(1) -&gt; 第一个csma node ptr</p>
</li>
<li><p>.Get(nCsma) -&gt; 第nCsma个csma node ptr,最后一个csma节点指针</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">UdpEchoClientHelper echoClient (csmaInterfaces.GetAddress (nCsma), 9);</div><div class="line">echoClient.SetAttribute (&quot;MaxPackets&quot;, UintegerValue (1));</div><div class="line">echoClient.SetAttribute (&quot;Interval&quot;, TimeValue (Seconds (1.0)));</div><div class="line">echoClient.SetAttribute (&quot;PacketSize&quot;, UintegerValue (1024));</div><div class="line"></div><div class="line">ApplicationContainer clientApps = echoClient.Install (p2pNodes.Get (0));</div><div class="line">clientApps.Start (Seconds (2.0));</div><div class="line">clientApps.Stop (Seconds (10.0));</div></pre></td></tr></table></figure>
<p>使用全局路由</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Ipv4GlobalRoutingHelper::PopulateRoutingTables ();</div></pre></td></tr></table></figure>
<p>开启Pcap追踪</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">pointToPoint.EnablePcapAll (&quot;second&quot;);</div><div class="line">csma.EnablePcap (&quot;second&quot;, csmaDevices.Get (1), true);</div></pre></td></tr></table></figure>
<p>CSMA 网络是一个多点对点网络。这就意味着多个终端使用一个共享媒介。每一个终端都有一个对应的网络设备。对于这样的网络，有两种基本的方法来搜集trace信息。</p>
<p>一种方法就是为每一个网络设备创立一个trace file并存储其发送和接收的数据包；</p>
<p>第二种方法就是在有所设备中选择一个网络设备，并将其设为promiscuous mode（混杂模式），然后这个设备探索网络的所有数据包并存储。</p>
<p>在代码中，我们设定 csmaDevices.Get(1)，第1个csma设备，为混杂promiscuous mode</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">  Simulator::Run ();</div><div class="line">  Simulator::Destroy ();</div><div class="line">  return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>然后运行这个程序</p>
<p>按照<a href="http://fatart.space/ns3%20%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0Command%20Line%20Argument/" target="_blank" rel="external">ns3 命令行参数Command Line Argument</a>上一篇介绍的command line argument system，输入<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ./waf --run &quot;scratch/mysecond --PrintHelp&quot;</div></pre></td></tr></table></figure></p>
<p>输出</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">second [Program Arguments] [General Arguments]</div><div class="line"></div><div class="line">Program Arguments:</div><div class="line">    --nCsma:    Number of &quot;extra&quot; CSMA nodes/devices [3]</div><div class="line">    --verbose:  Tell echo applications to log if true [true]</div><div class="line"></div><div class="line">General Arguments:</div><div class="line">    --PrintGlobals:              Print the list of globals.</div><div class="line">    --PrintGroups:               Print the list of groups.</div><div class="line">    --PrintGroup=[group]:        Print all TypeIds of group.</div><div class="line">    --PrintTypeIds:              Print all TypeIds.</div><div class="line">    --PrintAttributes=[typeid]:  Print all attributes of typeid.</div><div class="line">    --PrintHelp:                 Print this help message.</div></pre></td></tr></table></figure>
<p>输出了我们在代码中定义并让cmd 系统解析的 program arguments： nCsma和verbose</p>
<p>运行这个程序</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ./waf --run scratch/mysecond</div></pre></td></tr></table></figure>
<p>结果输出</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">At time 2s client sent 1024 bytes to 10.1.2.4 port 9</div><div class="line">At time 2.0078s server received 1024 bytes from 10.1.1.1 port 49153</div><div class="line">At time 2.0078s server sent 1024 bytes to 10.1.1.1 port 49153</div><div class="line">At time 2.01761s client received 1024 bytes from 10.1.2.4 port 9</div></pre></td></tr></table></figure>
<p>在top-level文件夹下发现3个pcap文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">second-0-0.pcap  second-1-0.pcap  second-2-0.pcap</div></pre></td></tr></table></figure>
<p>格式为<strong><name>-<node>-<device>.pacp</device></node></name></strong></p>
<p>for example : </p>
<ul>
<li>second-0-0.pacp: node zero, device zero, 这是一个节点0上的 point-to-point net device</li>
<li>second-1-0.pcap: node one,  device zero, 这是一盒节点1上的 point-to-point net device</li>
</ul>
<p><strong>node 0 指的是最左边的p2p节点，node1既是p2p，又是csma, node2 是第一个纯csma节点</strong></p>
<p>在代码中，我们设定 csmaDevices.Get(1)，第1个csma设备，为混杂promiscuous mode</p>
<p>下面我们使用tcpdump解析parse trace file</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ tcpdump -nn -tt -r second-0-0.pcap</div><div class="line">$ tcpdump -nn -tt -r second-1-0.pcap</div><div class="line">$ tcpdump -nn -tt -r second-2-0.pcap</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">reading from file second-0-0.pcap, link-type PPP (PPP)    //数据包类型为ppp（point to point类型）</div><div class="line">2.000000 IP 10.1.1.1.49153 &gt; 10.1.2.4.9: UDP, length 1024 //Node 0 p2p netdevice 在 2.0s发送    No.1</div><div class="line">2.017607 IP 10.1.2.4.9 &gt; 10.1.1.1.49153: UDP, length 1024 //client 收到服务器echo               No.9                                   </div><div class="line"></div><div class="line">reading from file second-1-0.pcap, link-type PPP (PPP)</div><div class="line">2.003686 IP 10.1.1.1.49153 &gt; 10.1.2.4.9: UDP, length 1024 </div><div class="line">// Node 1接收到了数据包（2.0s Node 0发送）,并将其传送到CSMA接口，并发送到最终目的节点           No.2 </div><div class="line">2.013921 IP 10.1.2.4.9 &gt; 10.1.1.1.49153: UDP, length 1024//(同时收到了10.1.2.4 echo信息)        No.8</div><div class="line"></div><div class="line">reading from file second-2-0.pcap, link-type EN10MB (Ethernet) //数据类型为 Ethernet</div><div class="line">2.007698 ARP, Request who-has 10.1.2.4 (ff:ff:ff:ff:ff:ff) tell 10.1.2.1, length 50  </div><div class="line">//Node 2 接收到数据包，并发送广播ARP信息请求目标10.1.2.4 MAC地址                                No.3</div><div class="line">2.007710 ARP, Reply 10.1.2.4 is-at 00:00:00:00:00:06, length 50//请求得到MAC地址                No.4                              </div><div class="line">2.007803 IP 10.1.1.1.49153 &gt; 10.1.2.4.9: UDP, length 1024  //转发信息                           No.5</div><div class="line">2.013815 ARP, Request who-has 10.1.2.1 (ff:ff:ff:ff:ff:ff) tell 10.1.2.4, length 50             No.6</div><div class="line">2.013828 ARP, Reply 10.1.2.1 is-at 00:00:00:00:00:03, length 50                                 No.7</div><div class="line">2.013921 IP 10.1.2.4.9 &gt; 10.1.1.1.49153: UDP, length 1024                                       No.8</div></pre></td></tr></table></figure>
<h3 id="同样的可以使用cml-system改变-nCsma-参数"><a href="#同样的可以使用cml-system改变-nCsma-参数" class="headerlink" title="同样的可以使用cml system改变 nCsma 参数"></a>同样的可以使用cml system改变 nCsma 参数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ./waf --run &quot;scratch/mysecond --nCsma=4&quot;</div></pre></td></tr></table></figure>
<h3 id="如果你对以一个旁观者角度在CSMA中得到trace-file不满意。你只想从一个单个device中获取trace-file。"><a href="#如果你对以一个旁观者角度在CSMA中得到trace-file不满意。你只想从一个单个device中获取trace-file。" class="headerlink" title="如果你对以一个旁观者角度在CSMA中得到trace file不满意。你只想从一个单个device中获取trace file。"></a>如果你对以一个旁观者角度在CSMA中得到trace file不满意。你只想从一个单个device中获取trace file。</h3><p>Go ahead and replace the EnablePcap calls with the calls below.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">pointToPoint.EnablePcap (&quot;second&quot;, p2pNodes.Get (0)-&gt;GetId (), 0);</div><div class="line">csma.EnablePcap (&quot;second&quot;, csmaNodes.Get (nCsma)-&gt;GetId (), 0, false);</div><div class="line">csma.EnablePcap (&quot;second&quot;, csmaNodes.Get (nCsma-1)-&gt;GetId (), 0, false);</div></pre></td></tr></table></figure>
<h2 id="如何获得node的号码？"><a href="#如何获得node的号码？" class="headerlink" title="如何获得node的号码？"></a>如何获得node的号码？</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">//       10.1.1.0</div><div class="line">// n0 -------------- n1   n2   n3   n4</div><div class="line">//    point-to-point  |    |    |    |</div><div class="line">//                    ================</div><div class="line">//                      LAN 10.1.2.0</div></pre></td></tr></table></figure>
<ol>
<li>节点在创建的时候是从0开始编号的，我们可以人工的记录节点创建的顺序,就如图上所示。</li>
<li>使用Node对象的GetId()函数，它将会返回node ID，This unique id happens to be also the index of the Node into the NodeList.</li>
</ol>
<p>所以我们可以确定 nCsma = 3</p>
<ul>
<li>p2pNodes.Get (0)-&gt;GetId () = 0</li>
<li>csmaNodes.Get (nCsma)-&gt;GetId () = 4;</li>
<li>csmaNodes.Get (nCsma-1)-&gt;GetId () = 3;</li>
</ul>
<h3 id="清除旧的trace-file"><a href="#清除旧的trace-file" class="headerlink" title="清除旧的trace file"></a>清除旧的trace file</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ rm *.pcap</div><div class="line">$ rm *.tr</div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/ns3 Using the Tracing System/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Fatart's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/ns3 Using the Tracing System/" itemprop="url">ns3 Using the Tracing System</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-21T16:28:25+08:00">
                2017-08-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/NS3/" itemprop="url" rel="index">
                    <span itemprop="name">NS3</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>详细内容请参考<a href="https://www.nsnam.org/docs/release/3.26/tutorial/html/tweaking.html" target="_blank" rel="external">ns-3 tutorial</a></p>
<h1 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h1><p>我们可以使用以下代码输出，还可以使用logging 模块输出一些信息。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">std::cout &lt;&lt; &quot;The values of x is&quot; &lt;&lt; x &lt;&lt;std::endl;</div></pre></td></tr></table></figure>
<p>但这些方式都有局限性，ns3 tracing system是一个通用（generic）输出。</p>
<p>ns3 tracing system 建立在这样的概念上，独立的tracing source 和 tracing sinks，以及一个统一机制（uniform mechanism）链接 source 和 sinks.</p>
<h2 id="ns-3-tracing-system的基本目标："><a href="#ns-3-tracing-system的基本目标：" class="headerlink" title="ns-3 tracing system的基本目标："></a>ns-3 tracing system的基本目标：</h2><ol>
<li><p>对于基本的任务，tracing system应当允许用户对于那些常用的tracing source                          产生标准的tracing，并能能够设置哪一个对象产生tracing文件</p>
</li>
<li><p>中级的使用者（intermediate user）必须能够拓展tracing系统以修改输出的格式，或者在不修改ns-3 core的情况下,插入新的tracing source，</p>
</li>
<li>高级的用户（advanced user）能够修改仿真器来添加新的tracing source和 sink.</li>
</ol>
<h2 id="什么是ns-3-的-tracing-sources-and-sinks？"><a href="#什么是ns-3-的-tracing-sources-and-sinks？" class="headerlink" title="什么是ns-3 的 tracing sources and sinks？"></a>什么是ns-3 的 tracing sources and sinks？</h2><h3 id="Trace-source"><a href="#Trace-source" class="headerlink" title="Trace source"></a>Trace source</h3><p>Trace source are entities that can signal events that happen in a simulation and provide access to interesting underlying data.<br>跟踪源是可以指示在模拟中发生的事件并提供对感兴趣的底层数据的访问的实体.</p>
<p>比如，一个trace source能够指示一个数据包什么时候被一个网络设备接收，并能为感兴趣的trace sink访问数据包的内容</p>
<p>trace souce 本身是没有作用的，它们必须”连接到”其他的有sink提供信息并实际有用的代码</p>
<h3 id="Trace-sink"><a href="#Trace-sink" class="headerlink" title="Trace sink"></a>Trace sink</h3><p>trace sink是 事件 和 trace source提供的数据的“消费者”。</p>
<p>在本文中，我们将浏览一些预先定义好的source和sink，并且说明它们如何用很少的改动来配置。</p>
<p>高级的tracing配置，包括拓展tracing命名空间和创建新的trace source间 ns3-manual 手册 和 how-to 章节。</p>
<h1 id="ASCII-Tracing"><a href="#ASCII-Tracing" class="headerlink" title="ASCII Tracing"></a>ASCII Tracing</h1><p>我们可以在Simulator::Run()前增加以下代码以添加ASCII tracing</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">AsciiTraceHelper ascii;</div><div class="line">pointToPoint.EnableAsciiAll (ascii.CreateFileStream (&quot;myfirst.tr&quot;));</div></pre></td></tr></table></figure>
<p>then build and run the script</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ./waf --run scratch/myfirst</div></pre></td></tr></table></figure>
<p>运行结束后，将在top-level 文件夹（ns3.26）创建一个<em>myfirst.tr</em>文件，并输出内容。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">At time 2s client sent 1024 bytes to 10.1.1.2 port 9</div><div class="line">At time 2.00369s server received 1024 bytes from 10.1.1.1 port 49153</div><div class="line">At time 2.00369s server sent 1024 bytes to 10.1.1.1 port 49153</div><div class="line">At time 2.00737s client received 1024 bytes from 10.1.1.2 port 9</div></pre></td></tr></table></figure>
<h2 id="解析（parse）-ASCII-Trace"><a href="#解析（parse）-ASCII-Trace" class="headerlink" title="解析（parse） ASCII Trace"></a>解析（parse） ASCII Trace</h2><p>文件里的每一行都与一个<em>trace event</em>相关。在这个例子里，我们追踪事件是每一个point-to-point netdevice中的<em>transmit queue</em></p>
<p>行首的符号意义如下：</p>
<ul>
<li>+：An enqueue operation occurred on the device queue</li>
<li>-: A dequeue operation occurred on the device queue</li>
<li>d: A packet was dropped, typically because the queue was full</li>
<li>r: A packet was received by the net device</li>
</ul>
<h2 id="完整ASCII-trace文件如下"><a href="#完整ASCII-trace文件如下" class="headerlink" title="完整ASCII trace文件如下"></a>完整ASCII trace文件如下</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">+ </div><div class="line">2</div><div class="line">/NodeList/0/DeviceList/0/$ns3::PointToPointNetDevice/TxQueue/Enqueue </div><div class="line">ns3::PppHeader (Point-to-Point Protocol:IP (0x0021)) </div><div class="line">ns3::Ipv4Header (tos 0x0 DSCP Default ECN Not-ECT ttl 64 id 0 protocol 17 offset (bytes) 0 flags [none] </div><div class="line">length: 1052 10.1.1.1 &gt; 10.1.1.2) </div><div class="line">ns3::UdpHeader (length: 1032 49153 &gt; 9) </div><div class="line">Payload (size=1024)</div></pre></td></tr></table></figure>
<ol>
<li>+号表示这是一个入队操作，第二行的2表示仿真时刻是2s</li>
<li><em>UdpEchoApplication</em>从第2s开始发送数据包。</li>
<li>指出是那一个trace source发起（originate）这个事件（以tracing namespace格式表示），namespace root是<em>NodeList</em>，<em>NodeList/0</em>表示NodeList的第0个，在每一个node下都有DeviceList,可以看出事件是由<em>DeviceList/0</em>发起的</li>
<li><em>$ns3::PointToPointNetDevice</em>告诉我们node 0 的 devcie 0 是一个什么类型的设备。 trace path 是<em>TxQueue/Enqueue</em></li>
<li>数据包以P2P协议压缩，并有IPv4 Header，从10.1.1.1发起，发送到10.1.1.2，数据包有UDP Header，payload是1024bytes</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">-</div><div class="line">2</div><div class="line">/NodeList/0/DeviceList/0/$ns3::PointToPointNetDevice/TxQueue/Dequeue</div><div class="line">ns3::PppHeader (Point-to-Point Protocol: IP (0x0021)) </div><div class="line">ns3::Ipv4Header (tos 0x0 DSCP Default ECN Not-ECT ttl 64 id 0 protocol 17 offset (bytes) 0 flags [none]</div><div class="line">length: 1052 10.1.1.1 &gt; 10.1.1.2) </div><div class="line">ns3::UdpHeader (length: 1032 49153 &gt; 9) </div><div class="line">Payload (size=1024)</div></pre></td></tr></table></figure>
<p>这里和section 1 不同之处在于dequeue，其他都一样，表示在第2秒，Node0-NetDevice0 transmit 1 packet</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">r </div><div class="line">2.00369</div><div class="line">/NodeList/1/DeviceList/0/$ns3::PointToPointNetDevice/MacRx </div><div class="line">ns3::PppHeader (Point-to-Point Protocol: IP (0x0021)) </div><div class="line">ns3::Ipv4Header (tos 0x0 DSCP Default ECN Not-ECT ttl 64 id 0 protocol 17 offset (bytes) 0 flags [none] </div><div class="line">length: 1052 10.1.1.1 &gt; 10.1.1.2) </div><div class="line">ns3::UdpHeader (length: 1032 49153 &gt; 9) </div><div class="line">Payload (size=1024)</div></pre></td></tr></table></figure>
<ol>
<li>r号表示这是收到数据包操作，第二行的2.00369表示仿真时刻是2.00369s</li>
<li><em>UdpEchoServerApplication</em>从第2.00369s开始收到数据包。</li>
<li>由NodeList 1 - Device 0 发起，可见是 server 的 netdevice 发起（originate）的</li>
<li><em>$ns3::PointToPointNetDevice</em>告诉我们node 1 的 devcie 0 是一个什么类型的设备。 packet reception trace source 是<em>MacRx</em></li>
<li>数据包以P2P协议压缩，并有IPv4 Header，从10.1.1.1发起，发送到10.1.1.2，数据包有UDP Header，payload是1024bytes</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">+ </div><div class="line">2.00369 </div><div class="line">/NodeList/1/DeviceList/0/$ns3::PointToPointNetDevice/TxQueue/Enqueue </div><div class="line">ns3::PppHeader (Point-to-Point Protocol: IP (0x0021)) </div><div class="line">ns3::Ipv4Header (tos 0x0 DSCP Default ECN Not-ECT ttl 64 id 0 protocol 17 offset (bytes) 0 flags [none] </div><div class="line">length: 1052 10.1.1.2 &gt; 10.1.1.1) </div><div class="line">ns3::UdpHeader (length: 1032 9 &gt; 49153) </div><div class="line">Payload (size=1024)</div></pre></td></tr></table></figure>
<p>N1 - D0（Server NetDevice）将接收到的数据包enqueue</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">- </div><div class="line">2.00369 </div><div class="line">/NodeList/1/DeviceList/0/$ns3::PointToPointNetDevice/TxQueue/Dequeue </div><div class="line">ns3::PppHeader (Point-to-Point Protocol: IP (0x0021)) </div><div class="line">ns3::Ipv4Header (tos 0x0 DSCP Default ECN Not-ECT ttl 64 id 0 protocol 17 offset (bytes) 0 flags [none] </div><div class="line">length: 1052 10.1.1.2 &gt; 10.1.1.1) </div><div class="line">ns3::UdpHeader (length: 1032 9 &gt; 49153) </div><div class="line">Payload (size=1024)</div></pre></td></tr></table></figure>
<p>N1 - D0（Server NetDevice）echo 一个数据包（10.1.1.2 -&gt; 10.1.1.1）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">r </div><div class="line">2.00737 </div><div class="line">/NodeList/0/DeviceList/0/$ns3::PointToPointNetDevice/MacRx </div><div class="line">ns3::PppHeader (Point-to-Point Protocol: IP (0x0021)) </div><div class="line">ns3::Ipv4Header (tos 0x0 DSCP Default ECN Not-ECT ttl 64 id 0 protocol 17 offset (bytes) 0 flags [none] </div><div class="line">length: 1052 10.1.1.2 &gt; 10.1.1.1) ns3::UdpHeader (length: 1032 9 &gt; 49153) </div><div class="line">Payload (size=1024)</div></pre></td></tr></table></figure>
<p>client 收到了 server 的 echo packet</p>
<p>通过ASCII trace 文件和console 控制台输出结果对照，能够非常方便地了解这个过程。</p>
<h1 id="PCAP-Tracing"><a href="#PCAP-Tracing" class="headerlink" title="PCAP Tracing"></a>PCAP Tracing</h1><p>产生可由Wireshark打开的.pcap追踪文件</p>
<p>同样的，我们添加代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pointToPoint.EnablePcapAll (&quot;myfirst&quot;);</div></pre></td></tr></table></figure>
<p>在ns3的文件夹下出现  myfirst-0-0.pacp（node 0-device 0）和myfirst-1-0.pacp（node 1-device 0）</p>
<h2 id="使用tcpdump-读取-pacap输出"><a href="#使用tcpdump-读取-pacap输出" class="headerlink" title="使用tcpdump 读取 pacap输出"></a>使用tcpdump 读取 pacap输出</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">$ tcpdump -nn -tt -r myfirst-0-0.pcap</div><div class="line">reading from file myfirst-0-0.pcap, link-type PPP (PPP)</div><div class="line">2.000000 IP 10.1.1.1.49153 &gt; 10.1.1.2.9: UDP, length 1024      No.1</div><div class="line">2.007372 IP 10.1.1.2.9 &gt; 10.1.1.1.49153: UDP, length 1024      No.4</div><div class="line"></div><div class="line">tcpdump -nn -tt -r myfirst-1-0.pcap</div><div class="line">reading from file myfirst-1-0.pcap, link-type PPP (PPP)</div><div class="line">2.003686 IP 10.1.1.1.49153 &gt; 10.1.1.2.9: UDP, length 1024      No.2</div><div class="line">2.003686 IP 10.1.1.2.9 &gt; 10.1.1.1.49153: UDP, length 1024      No.3</div></pre></td></tr></table></figure>
<p>从两个文件的时间顺序分析得到，流程顺序如 No.1-4</p>
<h2 id="Reading-output-with-Wireshark"><a href="#Reading-output-with-Wireshark" class="headerlink" title="Reading output with Wireshark"></a>Reading output with Wireshark</h2><p>可以下载wireshark 软件打开文件</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/Reading Section -Question Types(2)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Fatart's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/Reading Section -Question Types(2)/" itemprop="url">Reading Section -Question Types-2</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-21T10:06:44+08:00">
                2017-08-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/TOEFL/" itemprop="url" rel="index">
                    <span itemprop="name">TOEFL</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>本节为<a href="https://courses.edx.org/courses/course-v1:ETSx+TOEFLx+3T2017/courseware/9826c1abf9a840afb74c9f0d55319dfc/2b1c21019ca34da3b550f8be8bbaba83/?child=first" target="_blank" rel="external">courses</a>课程第二周笔记</p>
<h1 id="Factual-Negtive-Factual-Questions"><a href="#Factual-Negtive-Factual-Questions" class="headerlink" title="Factual/Negtive Factual Questions"></a>Factual/Negtive Factual Questions</h1><h3 id="Factual-Information-and-Negtive-Factual-information-questions-ask-about-facts-details-definitions-or-other-information-presented-by-the-author"><a href="#Factual-Information-and-Negtive-Factual-information-questions-ask-about-facts-details-definitions-or-other-information-presented-by-the-author" class="headerlink" title="Factual Information and Negtive Factual information questions ask about facts,details,definitions or other information presented by the author."></a>Factual Information and Negtive Factual information questions ask about facts,details,definitions or other information presented by the author.</h3><p>Paragraph 1: The body that impacted Earth at the end of the <strong>Cretaceous</strong> period was a <strong>meteorite</strong> with a mass of more than a trillion tons and a <strong>diameter</strong> of at least 19 kilometers. Scientists first identified this impact in 1980 from the worldwide layer of <strong>sediment</strong> deposited from the dust cloud that enveloped the planet after the impact. This sediment layer is enriched in the rare metal <strong>iridium</strong> and other elements that are relatively abundant in a meteorite but very rare in the <strong>crust</strong> of Earth.Even <strong>diluted</strong> by the terrestrial material excavated from the crater, this component of meteorites is easy identified.</p>
<h4 id="Factual-Question-According-to-the-paragraph-how-did-scientists-determinr-that-a-large-meteorite-had-impacted-Earth"><a href="#Factual-Question-According-to-the-paragraph-how-did-scientists-determinr-that-a-large-meteorite-had-impacted-Earth" class="headerlink" title="Factual Question: According to the paragraph, how did scientists determinr that a large meteorite had impacted Earth?"></a>Factual Question: According to the paragraph, how did scientists determinr that a large meteorite had impacted Earth?</h4><p>Paragraph 2: This impact released an enormous amount of energy, excavating a crater about twice as large as the <strong>lunar</strong> crater Tycho. The explosion lifted about 100 trillion tons of dust into the atmosphere, as can be determined by measuring the thickness of the sediment layer formed when this dust settled to the surface. Such a quantity of material would have blocked the sunlight completely from reaching the surface, plunging Earth into a period of cold and darkness that lasted at least several months. The explosion also calculated to have produced vast quantities of nitric <strong>acid</strong> and melted rock that sprayed out over much of Earth, starting widespread fires that must have consumed most terrestrial forests and grassland.Presumably, those environmental disasters could have been responsiblr for mass extinction,including the death of the dinosaurs.</p>
<h4 id="Negtive-Factual-Question-According-to-paragraph-all-of-the-following-statements-are-true-of-the-impact-at-the-end-of-the-cretaceous-period-EXCEPT"><a href="#Negtive-Factual-Question-According-to-paragraph-all-of-the-following-statements-are-true-of-the-impact-at-the-end-of-the-cretaceous-period-EXCEPT" class="headerlink" title="Negtive Factual Question: According to paragraph, all of the following statements are true of the impact at the end of the cretaceous period EXCEPT:?"></a>Negtive Factual Question: According to paragraph, all of the following statements are true of the impact at the end of the cretaceous period EXCEPT:?</h4><h4 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h4><table>
<thead>
<tr>
<th>new words</th>
<th>pronunciation</th>
<th>meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>meteorite</td>
<td>/ˈmiːtiəraɪt/</td>
<td>a piece of rock or metal from space that has landed on Earth 陨石</td>
</tr>
<tr>
<td>Cretaceous</td>
<td>/krɪˈteɪʃəs/</td>
<td>period between around 146 to 65 million years ago, when dinosaurs lived (until they died out);白堊紀</td>
</tr>
<tr>
<td>diameter</td>
<td>/daɪˈæmɪtər/</td>
<td>直徑</td>
</tr>
<tr>
<td>sediment</td>
<td>/ˈsedɪmənt/</td>
<td>solid substances that settle at the bottom of a liquid: 沉淀</td>
</tr>
<tr>
<td>envelope</td>
<td>/ˈenvəloʊp/</td>
<td>1.信封，2.包围</td>
</tr>
<tr>
<td>iridium</td>
<td>/ɪˈrɪdiəm/</td>
<td>the rare metal iridium 稀有金属銥</td>
</tr>
<tr>
<td>crust</td>
<td>/krʌst/</td>
<td>the crust of Earth 地壳</td>
</tr>
<tr>
<td>dilute</td>
<td>/dɪˈluːt/</td>
<td>to make a liquid weaker by adding water or another liquid ⇨ water down:</td>
</tr>
<tr>
<td>excavate</td>
<td>/ˈekskəveɪt/</td>
<td>to dig in the ground to look for old buildings or objects 挖掘</td>
</tr>
<tr>
<td>crater</td>
<td>/ˈkreɪtər/</td>
<td>a large hole in the top of a volcano 火山口</td>
</tr>
<tr>
<td>lunar</td>
<td>/ˈluːnər/</td>
<td>connected with the moon 月球的；月亮的</td>
</tr>
<tr>
<td>acid</td>
<td>/ˈæsɪd /</td>
<td>that has a bitter sharp taste 酸；酸味的</td>
</tr>
<tr>
<td>extinction</td>
<td>/ɪkˈstɪŋkʃn /</td>
<td>a situation in which a plant, an animal, a way of life, etc. stops existing</td>
</tr>
</tbody>
</table>
<h1 id="Inference-and-Rhetorical-Questions"><a href="#Inference-and-Rhetorical-Questions" class="headerlink" title="Inference and Rhetorical Questions"></a>Inference and Rhetorical Questions</h1><h3 id="Inference-questions-ask-about-ideas-and-arguments-that-are-not-explicitly-stated-in-the-text"><a href="#Inference-questions-ask-about-ideas-and-arguments-that-are-not-explicitly-stated-in-the-text" class="headerlink" title="Inference questions ask about ideas and arguments that are not explicitly stated in the text."></a>Inference questions ask about ideas and arguments that are not explicitly stated in the text.</h3><h3 id="Rhetorical-Purpose-questions-are-similar-they-ask-about-why-the-author-presents-a-piece-of-information"><a href="#Rhetorical-Purpose-questions-are-similar-they-ask-about-why-the-author-presents-a-piece-of-information" class="headerlink" title="Rhetorical Purpose questions are similar, they ask about why the author presents a piece of information."></a>Rhetorical Purpose questions are similar, they ask about why the author presents a piece of information.</h3><h4 id="Inference-Question-Which-of-the-following-can-be-inferred-from-paragraph-1-about-the-location-of-the-meteorite-impact-in-Mexico"><a href="#Inference-Question-Which-of-the-following-can-be-inferred-from-paragraph-1-about-the-location-of-the-meteorite-impact-in-Mexico" class="headerlink" title="Inference Question: Which of the following can be inferred from paragraph 1 about the location of the meteorite impact in Mexico?"></a>Inference Question: Which of the following can be inferred from paragraph 1 about the location of the meteorite impact in Mexico?</h4><h4 id="Rhetorical-Purpose-Question-In-paragraph-2-why-does-the-author-include-the-informatio-that-dinosaurs-had-flourished-for-tens-of-millions-of-years-and-then-suddently-disappeared"><a href="#Rhetorical-Purpose-Question-In-paragraph-2-why-does-the-author-include-the-informatio-that-dinosaurs-had-flourished-for-tens-of-millions-of-years-and-then-suddently-disappeared" class="headerlink" title="Rhetorical Purpose Question: In paragraph 2, why does the author include the informatio that dinosaurs had flourished for tens of millions of years and then suddently disappeared?"></a>Rhetorical Purpose Question: In paragraph 2, why does the author include the informatio that dinosaurs had flourished for tens of millions of years and then suddently disappeared?</h4><h3 id="Rhetorical-purpose-Key-words"><a href="#Rhetorical-purpose-Key-words" class="headerlink" title="Rhetorical purpose Key words:"></a>Rhetorical purpose Key words:</h3><ul>
<li>to illustrate</li>
<li>to explain</li>
<li>to constrast</li>
<li>to refute  (to prove that a statement or idea is not correct )</li>
<li>to support</li>
</ul>
<h1 id="Vocabulary"><a href="#Vocabulary" class="headerlink" title="Vocabulary"></a>Vocabulary</h1><h3 id="Vocabulary-questions-measure-whether-you-know-the-meaning-of-important-words-in-a-reading-passage"><a href="#Vocabulary-questions-measure-whether-you-know-the-meaning-of-important-words-in-a-reading-passage" class="headerlink" title="Vocabulary questions measure whether you know the meaning of important words in a reading passage."></a>Vocabulary questions measure whether you know the meaning of important words in a reading passage.</h3><h3 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h3><p>There is increasing evidence that the impacts of meteorites have had important effects on Earth, particularly in the field of biological evolution. Such impacts continue to <strong>pose</strong> a natural hazard to life on Earth.</p>
<p>pose = present</p>
<h1 id="Reference-Questions"><a href="#Reference-Questions" class="headerlink" title="Reference Questions"></a>Reference Questions</h1><h3 id="Reference-questions-look-similar-to-vocabulary-questions-A-word-or-phrase-is-highlighted-in-the-passage-and-you-are-asked-what-the-word-refers-to"><a href="#Reference-questions-look-similar-to-vocabulary-questions-A-word-or-phrase-is-highlighted-in-the-passage-and-you-are-asked-what-the-word-refers-to" class="headerlink" title="Reference questions look similar to vocabulary questions. A word or phrase is highlighted in the passage, and you are asked what the word refers to."></a>Reference questions look similar to vocabulary questions. A word or phrase is highlighted in the passage, and you are asked what the word refers to.</h3><p>Usually the word is a pronoun, like “she”,”they” or “it”.</p>
<p>It could also be a relative pronoun, like “which,” “that” or “whom”.</p>
<p><em>In classic research Paul Ekman took photographs of people exhibiting the emotions of anger, disgust, fear, happiness, and sadness. He then asked people around the world to indicate what emotions were being depicted in <strong>them</strong>.</em></p>
<p>The word “them” in the passage refers to:</p>
<p>A.   emotions</p>
<p>B.    people</p>
<p>C.   photographs</p>
<p>D.   cultures</p>
<p>The answer is C, photographs.</p>
<h1 id="Sentence-simplification-questions"><a href="#Sentence-simplification-questions" class="headerlink" title="Sentence simplification questions"></a>Sentence simplification questions</h1><h3 id="Sentence-Simplification-questions-ask-you-to-choose-a-sentence-with-the-same-meaning-as-a-given-sentence"><a href="#Sentence-Simplification-questions-ask-you-to-choose-a-sentence-with-the-same-meaning-as-a-given-sentence" class="headerlink" title="Sentence Simplification questions ask you to choose a sentence with the same meaning as a given sentence."></a>Sentence Simplification questions ask you to choose a sentence with the same meaning as a given sentence.</h3><h1 id="Insert-Text-Questions"><a href="#Insert-Text-Questions" class="headerlink" title="Insert Text Questions"></a>Insert Text Questions</h1><h3 id="For-Insert-Text-questions-you-are-given-a-new-sentence-and-asked-where-in-the-passage-it-would-best-fit-These-questions-require-you-to-understand-the-logic-of-the-passage-and-the-grammatical-connections-between-sentences"><a href="#For-Insert-Text-questions-you-are-given-a-new-sentence-and-asked-where-in-the-passage-it-would-best-fit-These-questions-require-you-to-understand-the-logic-of-the-passage-and-the-grammatical-connections-between-sentences" class="headerlink" title="For Insert Text questions, you are given a new sentence and asked where in the passage it would best fit. These questions require you to understand the logic of the passage and the grammatical connections between sentences."></a>For Insert Text questions, you are given a new sentence and asked where in the passage it would best fit. These questions require you to understand the logic of the passage and the grammatical connections between sentences.</h3><h1 id="Prose-Summary-and-Fill-in-a-Table-Questions"><a href="#Prose-Summary-and-Fill-in-a-Table-Questions" class="headerlink" title="Prose Summary and Fill in a Table Questions"></a>Prose Summary and Fill in a Table Questions</h1><h3 id="Prose-Summary-questions-ask-you-to-select-the-major-ideas-from-a-passage-by-distinguishing-them-from-minor-points-or-ideas-that-are-not-in-the-passage-Fill-in-a-Table-questions-ask-you-to-correctly-categorize-facts-presented-in-the-passage"><a href="#Prose-Summary-questions-ask-you-to-select-the-major-ideas-from-a-passage-by-distinguishing-them-from-minor-points-or-ideas-that-are-not-in-the-passage-Fill-in-a-Table-questions-ask-you-to-correctly-categorize-facts-presented-in-the-passage" class="headerlink" title="Prose Summary questions ask you to select the major ideas from a passage by distinguishing them from minor points or ideas that are not in the passage. Fill in a Table questions ask you to correctly categorize facts presented in the passage."></a>Prose Summary questions ask you to select the major ideas from a passage by distinguishing them from minor points or ideas that are not in the passage. Fill in a Table questions ask you to correctly categorize facts presented in the passage.</h3><p>Prose summary: 6 answer choices - 3 correct choices express the most important ideas.</p>
<h1 id="Reading-Practice-Test"><a href="#Reading-Practice-Test" class="headerlink" title="Reading Practice Test"></a>Reading Practice Test</h1><h2 id="Directions-Read-the-passage-Then-answer-the-questions-Give-yourself-20-minutes-to-complete-this-practice-set"><a href="#Directions-Read-the-passage-Then-answer-the-questions-Give-yourself-20-minutes-to-complete-this-practice-set" class="headerlink" title="Directions: Read the passage. Then answer the questions. Give yourself 20 minutes to complete this practice set."></a>Directions: Read the passage. Then answer the questions. Give yourself 20 minutes to complete this practice set.</h2><h3 id="Pastoralism-in-Ancient-Inner-Eurasia"><a href="#Pastoralism-in-Ancient-Inner-Eurasia" class="headerlink" title="Pastoralism in Ancient Inner Eurasia"></a>Pastoralism in Ancient Inner Eurasia</h3><p><img src="https://d37djvu3ytnwxt.cloudfront.net/assets/courseware/v1/c44e0659b8715855f2d4c68d8de441c6/asset-v1:ETSx+TOEFLx+3T2017+type@asset+block/MAP_Of_Eurasia.GIF" alt="image"></p>
<p><strong>Pastoralism</strong> is a lifestyle in which economic activity is based primarily on <strong>livestock</strong>. <strong>Archaeological</strong> evidence suggests that by 3,000 B.C., and perhaps even earlier, there had emerged on the steppes of Inner Eurasia the distinctive types of pastoralism that were to dominate the region’s history for several <strong>millennia</strong>. Here, the horse was already becoming the animal of prestige in many regions, though sheep, goats, and cattle could also play a vital role. It is the use of horses for transportation and warfare that explains why Inner Eurasian pastoralism proved the most mobile and the most militaristic of all major forms of pastoralism. The emergence and spread of pastoralism had a profound impact on the history of Inner Eurasia, and also, indirectly, on the parts of Asia and Europe just outside this area. In particular, pastoralism favors a mobile lifestyle, and this mobility helps to explain the impact of pastoralist societies on this part of the world.</p>
<p>The mobility of pastoralist societies reflects their dependence on animal-based foods. While agriculturalists rely on <strong>domesticated</strong> plants, pastoralists rely on domesticated animals. As a result, pastoralists, like carnivores in general, occupy a higher position on the food chain. All else being equal, this means they must exploit larger areas of land than do agriculturalists to secure the same amount of food, clothing, and other <strong>necessities</strong>. So pastoralism is a more extensive lifeway than farming is. However, the larger the <strong>terrain</strong> used to support a group, the harder it is to exploit that terrain while remaining in one place. So, basic ecological principles imply a strong tendency within pastoralist lifeways toward nomadism (a mobile lifestyle). As the archaeologist Roger Cribb puts it, “The greater the degree of pastoralism, the stronger the tendency toward nomadism.” A modern Turkic nomad interviewed by Cribb commented: “The more animals you have, the farther you have to move.”      </p>
<p>Nomadism has further consequences. It means that pastoralist societies occupy and can influence very large <strong>territories</strong>. This is particularly true of the horse pastoralism that emerged in the Inner Eurasian steppes, for this was the most mobile of all major forms of pastoralism. So, it is no accident that with the appearance of pastoralist societies there appear large areas that share similar cultural, ecological, and even linguistic features. By the late fourth millennium B.C., there is already evidence of large culture zones reaching from Eastern Europe to the western borders of Mongolia. Perhaps the most striking sign of mobility is the fact that by the third millennium B.C., most pastoralists in this huge region spoke related languages ancestral to the modern Indo-European languages. The remarkable mobility and range of pastoral societies explain, in part, why so many linguists have argued that the Indo-European languages began their <strong>astonishing</strong> expansionist career not among farmers in Anatolia (present-day Turkey), but among early pastoralists from Inner Eurasia. Such theories imply that the Indo-European languages evolved not in Neolithic (10,000 to 3,000 B.C.) Anatolia, but among the foraging communities of the cultures in the region of the Don and Dnieper rivers, which took up <strong>stock</strong> breeding and began to exploit the neighboring <strong>steppes</strong>. </p>
<p>Nomadism also subjects pastoralist communities to strict rules of <strong>portability</strong>. If you are constantly on the move, you cannot afford to accumulate large material surpluses. Such rules limit variations in accumulated material goods between pastoralist households (though they may also encourage a taste for portable goods of high value such as silks or jewelry). So, by and large, nomadism implies a high degree of self-sufficiency and inhibits the appearance of an extensive division of labor. Inequalities of wealth and rank certainly exist, and have probably existed in most pastoralist societies, but except in periods of military conquest, they are normally too slight to generate the stable, hereditary hierarchies that are usually implied by the use of the term class. Inequalities of gender have also existed in pastoralist societies, but they seem to have been softened by the absence of steep hierarchies of wealth in most communities, and also by the requirement that women acquire most of the skills of men, including, often, their military skills.</p>
<h1 id="Words"><a href="#Words" class="headerlink" title="Words"></a>Words</h1><table>
<thead>
<tr>
<th>words</th>
<th>pronounce</th>
<th>meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>pastoralism</td>
<td>/ˈpæstərəlɪzəm/</td>
<td>a way of keeping animals that involves moving them from place to place to find water and food</td>
</tr>
<tr>
<td>livestock</td>
<td>/ˈlaɪvstɒk/</td>
<td>animals such as cows and sheep that are kept on a farm ⇨ cattle</td>
</tr>
<tr>
<td>stock</td>
<td>/stɑːk/</td>
<td>animals, especially cattle</td>
</tr>
<tr>
<td>archaeological</td>
<td>/ˌɑːkiəˈlɒdʒɪkəl/</td>
<td>the study of ancient societies by examining what remains of their buildings, graves, tools etc</td>
</tr>
<tr>
<td>millennia</td>
<td>/ mɪˈleniə/</td>
<td>a period of 1000 years</td>
</tr>
<tr>
<td>presitge</td>
<td>/preˈstiːʒ/</td>
<td>the respect and admiration that someone or something gets because of their success or important position in society</td>
</tr>
<tr>
<td>domesticate</td>
<td>/dəˈmestɪkeɪt /</td>
<td>make a wild animal working for humans, grow plants or crops for humans</td>
</tr>
<tr>
<td>terrain</td>
<td>/təˈreɪn/</td>
<td>used to refer to an area of land when you are mentioning its natural features, for example, if it is rough,flat,etc</td>
</tr>
<tr>
<td>territory</td>
<td>/ˈterətɔːri /</td>
<td>land that is under the control of a particular country or ruler</td>
</tr>
<tr>
<td>astonish</td>
<td>/əˈstɑːnɪʃ/</td>
<td>to surprise sb very much</td>
</tr>
<tr>
<td>steppe</td>
<td>/step/</td>
<td>a large area of land without trees, especially in Russia, Asia, and eastern Europe</td>
</tr>
<tr>
<td>portability</td>
<td>/ˌpɔːtəˈbɪləti/</td>
<td>able to be carried or moved easily</td>
</tr>
<tr>
<td>necessity</td>
<td>/nɪˈsesəti/</td>
<td>something that you need to have in order to live</td>
</tr>
</tbody>
</table>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/C++ 函数调用的const形参（parameter）和非const形参/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Fatart's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/C++ 函数调用的const形参（parameter）和非const形参/" itemprop="url">C++ 函数调用的const形参（parameter）和非const形参</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-19T20:46:25+08:00">
                2017-08-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/C/" itemprop="url" rel="index">
                    <span itemprop="name">C++</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><p>在程序设计中我们会经常调用函数，调用函数就会涉及参数的问题，那么在形参列表中const形参与非const形参对传递过来的实参有什么要求呢？<br>先来看一个简单的例子：</p>
<p>C++函数中const形参与非const形参<br>2015-09-11 21:50 1346人阅读 评论(0) 收藏 举报<br>.<br> 分类：<br>C（53）<br>.<br>在程序设计中我们会经常调用函数，调用函数就会涉及参数的问题，那么在形参列表中const形参与非const形参对传递过来的实参有什么要求呢？<br>先来看一个简单的例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">#include &lt;iostream&gt;</div><div class="line">#include &lt;string&gt;</div><div class="line">using namespace std;</div><div class="line">void print_str(const string s)</div><div class="line">&#123;</div><div class="line">       cout&lt;&lt;s&lt;&lt;endl;</div><div class="line">&#125;</div><div class="line">int main()</div><div class="line">&#123;</div><div class="line">      print_str(&quot;hello world&quot;);</div><div class="line">      return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="输出"><a href="#输出" class="headerlink" title="输出"></a>输出</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hello world</div></pre></td></tr></table></figure>
<h2 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h2><p>毫无疑问，const实参传递给const形参，正确调用函数，如果你将第4行代码中的const去掉，也能得到正确的结果。那么在去掉const的基础上将形参变为引用形参，会出现什么样的结果呢？看下面的代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">#include &lt;iostream&gt;</div><div class="line">#include &lt;string&gt;</div><div class="line"></div><div class="line">using namespace std;</div><div class="line">void print_str( string &amp; s)</div><div class="line">&#123;</div><div class="line">      cout&lt;&lt;s&lt;&lt;endl;</div><div class="line">&#125;</div><div class="line">int main()</div><div class="line">&#123;</div><div class="line">      print_str(&quot;hello world&quot;);</div><div class="line">      return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="输出-1"><a href="#输出-1" class="headerlink" title="输出"></a>输出</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">error：将类型为 std::string&amp; 的非const引用初始化为类型为 const char*的临时变量无效</div></pre></td></tr></table></figure>
<p>发现编译不通过，如果在第4行的string前加上一个const，就会通过编译。</p>
<p>进一步研究我们会发现指针形参与引用形参会出现类似的情况。</p>
<p><strong>普通形参加不加const限定符对实参没有影响，引用形参和指针形参前面没有const限定符时，实参必须是非const的，而前面有const限定符时对实参也没有什么影响。</strong></p>
<h1 id="为什么会出现这种情况？"><a href="#为什么会出现这种情况？" class="headerlink" title="为什么会出现这种情况？"></a>为什么会出现这种情况？</h1><p>原因在于实参的传递方式不同，函数中的形参是普通形参的时，函数只是操纵的实参的副本，而无法去修改实参，实参会想，你形参反正改变不了我的值，那么你有没有const还有什么意义吗？<br>引用形参和指针形参就下不同了，函数是对实参直接操纵，没有const的形参时实参的值是可以改变的，这种情况下怎能用函数来操纵const实参呢。</p>
<p><strong>顶层const : 指针或引用本身是个常量</strong><br><strong>底层const: 表示指针所指向的对象是个常量。</strong></p>
<p>例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">const double *const pip = &amp;pi;</div></pre></td></tr></table></figure></p>
<p>第一个const，底层const，不能通过pip改变指向的内容<br>第二个const，顶层cinst，修饰指针本身，指向关系不能改变</p>
<p>在C++ primer p208中讲到重载和const形参的关系，总结：<br>顶层const不影响传入函数的对象，一个拥有顶层const的形参无法和没有顶层const的形参区分开。</p>
<p>如 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Record lookup(Phone);</div><div class="line">Record lookup(const Phone);</div></pre></td></tr></table></figure>
<p>形参Phone没有加应用，它只是对实参的副本，所以它加不加const是一样的，另外一方面const是顶层const</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Record lookup(Phone*);</div><div class="line">Record lookup(Phone *const);</div></pre></td></tr></table></figure>
<p>顶层const, Phone<em> 能够改变实参，Phone </em>const同样能，不能区分</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">int calc(int&amp;, int&amp;);</div><div class="line">int calc(const int&amp;, const int&amp;);</div></pre></td></tr></table></figure>
<p>底层const，const int&amp; 的形参不能够去改变实参的值，但int&amp;形参能够去改变实参的值，能区分</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">int calc(int*, int*);</div><div class="line">int calc(const int*, const int*);</div></pre></td></tr></table></figure>
<p>底层const，const int<em> 的形参指针不能够去改变实参的值，但int</em>形参指针能够去改变实参的值，能区分</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/ns3 命令行参数Command Line Argument/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Fatart's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/ns3 命令行参数Command Line Argument/" itemprop="url">ns3 命令行参数Command Line Argument</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-18T16:28:25+08:00">
                2017-08-18
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/NS3/" itemprop="url" rel="index">
                    <span itemprop="name">NS3</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>详细内容请参考<a href="https://www.nsnam.org/docs/release/3.26/tutorial/html/tweaking.html" target="_blank" rel="external">ns-3 tutorial</a></p>
<h1 id="Overriding-Default-Attributes"><a href="#Overriding-Default-Attributes" class="headerlink" title="Overriding Default Attributes"></a>Overriding Default Attributes</h1><p>我们可以通过 command line argument 改变 ns-3 代码的机制。以下代码提供了解析（parse）command line argument和基于这些参数自动设立局部和全部变量。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">int</div><div class="line">main (int argc, char *argv[])</div><div class="line">&#123;</div><div class="line">  ...</div><div class="line"></div><div class="line">  CommandLine cmd;</div><div class="line">  cmd.Parse (argc, argv);</div><div class="line"></div><div class="line">  ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>使用<em>PrintHelp</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ./waf --run &quot;scratch/myfirst --PrintHelp&quot;</div></pre></td></tr></table></figure>
<p>控制台输出</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">Waf: Entering directory `/home/craigdo/repos/ns-3-allinone/ns-3-dev/build&apos;</div><div class="line">Waf: Leaving directory `/home/craigdo/repos/ns-3-allinone/ns-3-dev/build&apos;</div><div class="line">&apos;build&apos; finished successfully (0.413s)</div><div class="line">TcpL4Protocol:TcpStateMachine()</div><div class="line">CommandLine:HandleArgument(): Handle arg name=PrintHelp value=</div><div class="line">--PrintHelp: Print this help message.     输出帮助信息</div><div class="line">--PrintGroups: Print the list of groups.  输出group列表，如Antenna,Aodv,Core,Wifi...，是和Source directory相关的</div><div class="line">--PrintTypeIds: Print all TypeIds.        输出所有的TypeId，如ns3::PointToPointChannel，ns3::PointToPointNetDevice</div><div class="line">--PrintGroup=[group]: Print all TypeIds of group. 输出group相关TypeId</div><div class="line">--PrintAttributes=[typeid]: Print all attributes of typeid. 输出typeId相关的Attribute</div><div class="line">--PrintGlobals: Print the list of globals. 输出全局变量列表</div></pre></td></tr></table></figure>
<p>输入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ ./waf --run &quot;scratch/myfirst --PrintAttributes=ns3::PointToPointNetDevice&quot;</div><div class="line">$ ./waf --run &quot;scratch/myfirst --PrintAttributes=ns3::PointToPointChannel&quot;</div></pre></td></tr></table></figure>
<p>得到PointToPointNetDevice的默认Attributes值，这个值我们同样在可以在<a href="https://www.nsnam.org/docs/release/3.26/doxygen/classns3_1_1_point_to_point_net_device.html" target="_blank" rel="external">API-Attributes</a>查询得到。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">Attributes for TypeId ns3::PointToPointNetDevice</div><div class="line">    --ns3::PointToPointNetDevice::Address=[ff:ff:ff:ff:ff:ff]</div><div class="line">        The MAC address of this device.</div><div class="line">    --ns3::PointToPointNetDevice::DataRate=[32768bps]</div><div class="line">        The default data rate for point to point links</div><div class="line">    --ns3::PointToPointNetDevice::InterframeGap=[+0.0ns]</div><div class="line">        The time to wait between packet (frame) transmissions</div><div class="line">    --ns3::PointToPointNetDevice::Mtu=[1500]</div><div class="line">        The MAC-level Maximum Transmission Unit</div><div class="line">    --ns3::PointToPointNetDevice::ReceiveErrorModel=[0]</div><div class="line">        The receiver error model used to simulate packet loss</div><div class="line">    --ns3::PointToPointNetDevice::TxQueue=[0]</div><div class="line">        A queue to use as the transmit queue in the device.</div><div class="line">        </div><div class="line">Attributes for TypeId ns3::PointToPointChannel</div><div class="line">    --ns3::PointToPointChannel::Delay=[+0.0ns]</div><div class="line">        Propagation delay through the channel</div></pre></td></tr></table></figure>
<p>于是我们可以用command line argument来修改 TypeId相关的参数Attributes值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ ./waf --run &quot;scratch/myfirst --ns3::PointToPointNetDevice::DataRate=5Mbps&quot;</div><div class="line"></div><div class="line">$ ./waf --run &quot;scratch/myfirst --ns3::PointToPointNetDevice::DataRate=5Mbps --ns3::PointToPointChannel::Delay=2ms --ns3::UdpEchoClient::MaxPackets=2&quot;</div></pre></td></tr></table></figure>
<h1 id="Hooking-Your-Own-Value"><a href="#Hooking-Your-Own-Value" class="headerlink" title="Hooking Your Own Value"></a>Hooking Your Own Value</h1><p>你也可以将自己定义的变量和command line系统结合，如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">int</div><div class="line">main (int argc, char *argv[])</div><div class="line">&#123;</div><div class="line">  uint32_t nPackets = 1;</div><div class="line"></div><div class="line">  CommandLine cmd;</div><div class="line">  cmd.AddValue(&quot;nPackets&quot;, &quot;Number of packets to echo&quot;, nPackets);</div><div class="line">  cmd.Parse (argc, argv);</div><div class="line"></div><div class="line">  ...</div></pre></td></tr></table></figure>
<p>定义了一个变量nPackets，并在设置echo参数的地方改写代码如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">echoClient.SetAttribute (&quot;MaxPackets&quot;, UintegerValue (nPackets));</div></pre></td></tr></table></figure>
<p>此时运行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ./waf --run &quot;scratch/myfirst --PrintHelp&quot;</div></pre></td></tr></table></figure>
<p>输出</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">Program Arguments:</div><div class="line">    --nPackets:  Number of packets to echo [1]</div><div class="line"></div><div class="line">General Arguments:</div><div class="line">    --PrintGlobals:              Print the list of globals.</div><div class="line">    --PrintGroups:               Print the list of groups.</div><div class="line">    --PrintGroup=[group]:        Print all TypeIds of group.</div><div class="line">    --PrintTypeIds:              Print all TypeIds.</div><div class="line">    --PrintAttributes=[typeid]:  Print all attributes of typeid.</div><div class="line">    --PrintHelp:                 Print this help message.</div></pre></td></tr></table></figure>
<p>这样我们就可以使用command line system在控制台改变nPackets的值，代码如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ./waf --run &quot;scratch/myfirst --nPackets=2&quot;</div></pre></td></tr></table></figure>
<p>结果输出</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">At time 2s client sent 1024 bytes to 10.1.1.2 port 9</div><div class="line">At time 2.00369s server received 1024 bytes from 10.1.1.1 port 49153</div><div class="line">At time 2.00369s server sent 1024 bytes to 10.1.1.1 port 49153</div><div class="line">At time 2.00737s client received 1024 bytes from 10.1.1.2 port 9</div><div class="line">At time 3s client sent 1024 bytes to 10.1.1.2 port 9</div><div class="line">At time 3.00369s server received 1024 bytes from 10.1.1.1 port 49153</div><div class="line">At time 3.00369s server sent 1024 bytes to 10.1.1.1 port 49153</div><div class="line">At time 3.00737s client received 1024 bytes from 10.1.1.2 port 9</div></pre></td></tr></table></figure>
<p>可以看到client发送了两次packets</p>
<p>我们通常使用command line argument 系统来控制全局变量和Attributes</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/Reading Section -Question Types/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Fatart's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/Reading Section -Question Types/" itemprop="url">Reading Section -Question Types</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-18T10:06:44+08:00">
                2017-08-18
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/TOEFL/" itemprop="url" rel="index">
                    <span itemprop="name">TOEFL</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>本节为<a href="https://courses.edx.org/courses/course-v1:ETSx+TOEFLx+3T2017/courseware/9826c1abf9a840afb74c9f0d55319dfc/2b1c21019ca34da3b550f8be8bbaba83/?child=first" target="_blank" rel="external">courses</a>课程第二周笔记</p>
<h1 id="Reading-Tips"><a href="#Reading-Tips" class="headerlink" title="Reading Tips"></a>Reading Tips</h1><p>There are several key skills that you’ll need to be successful in the Reading section. You should be able to: </p>
<ol>
<li><p><strong>Synthesize</strong> information presented in the text </p>
<p> This means that you can read chunks of text and identify main ideas being expressed. You should be able to draw connections between individual sentences and <strong>paraphrase</strong> the information that is presented.</p>
</li>
<li><p>Identify the author’s <strong>rhetorical</strong> purpose</p>
<p>When you read a piece of information, you should be able to understand why the author has included it. Is it an example of a phenomenon, a supporting detail for an argument, or perhaps the introduction of a new idea? Understanding the structure of each paragraph and the whole passage is critical to understanding its contents. </p>
</li>
<li><p>Scan the text to find specific pieces of information</p>
<p>In order to put together the big picture about what’s going on in a passage, you will also need to <strong>comprehend</strong> the little pieces that fit together to make that big picture. It is important to be able to quickly locate a sentence or portion of a paragraph that discusses a particular point. Once you’ve found that sentence, you can re-read it in order to understand exactly what is being expressed.</p>
</li>
<li><p>Understand academic vocabulary used in the passage</p>
<p>A newspaper or magazine article might use more everyday language—the sort of thing you hear in conversations and read in emails. But an academic text, regardless of the subject, contains certain vocabulary that is standard in academic <strong>discourse</strong>. There might be words related to presenting theories: “propose”, “hypothesis”, “scenario”. Or there could be words that connect two sentences: “however”, “in addition”, “thus”. A good reader should be familiar with this type of vocabulary.</p>
</li>
</ol>
<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><table>
<thead>
<tr>
<th>new words</th>
<th>pronunciation</th>
<th>meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>synthesize</td>
<td>/ˈsɪnθɪsaɪz/</td>
<td>to combine separate things into a complete whole</td>
</tr>
<tr>
<td>paraphrase</td>
<td>/ˈpærəfreɪz/</td>
<td>to express in a shorter, clearer, or different way what someone has said or written,syn=summarize</td>
</tr>
<tr>
<td>rhetorical</td>
<td>/rɪˈtɔːrɪkl/</td>
<td>If you ask a rhetorical question it means you don’t necessarily expect an answer, but you do want an occasion to talk about something.</td>
</tr>
<tr>
<td>comprehend</td>
<td>/ˌkɒmprɪˈhend/</td>
<td>to understand something that is complicated or difficult</td>
</tr>
<tr>
<td>discourse</td>
<td>/ˈdɪskɔːs /</td>
<td>a serious speech or piece of writing on a particular subject</td>
</tr>
<tr>
<td>hypothesis</td>
<td>/haɪˈpɒθəsɪs/</td>
<td>an idea that is suggested as an explanation for something, but that has not yet been proved to be true,syn=theory</td>
</tr>
</tbody>
</table>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/reading section -tips/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Fatart's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/reading section -tips/" itemprop="url">Reading Section -Tips</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-18T10:06:44+08:00">
                2017-08-18
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/TOEFL/" itemprop="url" rel="index">
                    <span itemprop="name">TOEFL</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>本节为<a href="https://courses.edx.org/courses/course-v1:ETSx+TOEFLx+3T2017/courseware/9826c1abf9a840afb74c9f0d55319dfc/2b1c21019ca34da3b550f8be8bbaba83/?child=first" target="_blank" rel="external">courses</a>课程第二周笔记</p>
<h1 id="Reading-Tips"><a href="#Reading-Tips" class="headerlink" title="Reading Tips"></a>Reading Tips</h1><p>There are several key skills that you’ll need to be successful in the Reading section. You should be able to: </p>
<ol>
<li><p><strong>Synthesize</strong> information presented in the text </p>
<p> This means that you can read chunks of text and identify main ideas being expressed. You should be able to draw connections between individual sentences and <strong>paraphrase</strong> the information that is presented.</p>
</li>
<li><p>Identify the author’s <strong>rhetorical</strong> purpose</p>
<p>When you read a piece of information, you should be able to understand why the author has included it. Is it an example of a phenomenon, a supporting detail for an argument, or perhaps the introduction of a new idea? Understanding the structure of each paragraph and the whole passage is critical to understanding its contents. </p>
</li>
<li><p>Scan the text to find specific pieces of information</p>
<p>In order to put together the big picture about what’s going on in a passage, you will also need to <strong>comprehend</strong> the little pieces that fit together to make that big picture. It is important to be able to quickly locate a sentence or portion of a paragraph that discusses a particular point. Once you’ve found that sentence, you can re-read it in order to understand exactly what is being expressed.</p>
</li>
<li><p>Understand academic vocabulary used in the passage</p>
<p>A newspaper or magazine article might use more everyday language—the sort of thing you hear in conversations and read in emails. But an academic text, regardless of the subject, contains certain vocabulary that is standard in academic <strong>discourse</strong>. There might be words related to presenting theories: “propose”, “hypothesis”, “scenario”. Or there could be words that connect two sentences: “however”, “in addition”, “thus”. A good reader should be familiar with this type of vocabulary.</p>
</li>
</ol>
<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><table>
<thead>
<tr>
<th>new words</th>
<th>pronunciation</th>
<th>meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>synthesize</td>
<td>/ˈsɪnθɪsaɪz/</td>
<td>to combine separate things into a complete whole</td>
</tr>
<tr>
<td>paraphrase</td>
<td>/ˈpærəfreɪz/</td>
<td>to express in a shorter, clearer, or different way what someone has said or written,syn=summarize</td>
</tr>
<tr>
<td>rhetorical</td>
<td>/rɪˈtɔːrɪkl/</td>
<td>If you ask a rhetorical question it means you don’t necessarily expect an answer, but you do want an occasion to talk about something.</td>
</tr>
<tr>
<td>comprehend</td>
<td>/ˌkɒmprɪˈhend/</td>
<td>to understand something that is complicated or difficult</td>
</tr>
<tr>
<td>discourse</td>
<td>/ˈdɪskɔːs /</td>
<td>a serious speech or piece of writing on a particular subject</td>
</tr>
<tr>
<td>hypothesis</td>
<td>/haɪˈpɒθəsɪs/</td>
<td>an idea that is suggested as an explanation for something, but that has not yet been proved to be true,syn=theory</td>
</tr>
</tbody>
</table>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="" />
          <p class="site-author-name" itemprop="name"></p>
           
              <p class="site-description motion-element" itemprop="description">�������ɣ�������̫��</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">17</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">4</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">8</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder"></span>

  
</div>


  <div class="powered-by">
    由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
  </div>

  <span class="post-meta-divider">|</span>

  <div class="theme-info">
    主题 &mdash;
    <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
      NexT.Mist
    </a>
  </div>


        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  

  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  








  





  

  

  

  

  

  

</body>
</html>
