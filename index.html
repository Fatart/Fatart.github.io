<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta name="description" content="�������ɣ�������̫��">
<meta property="og:type" content="website">
<meta property="og:title" content="Fatart&#39;s blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Fatart&#39;s blog">
<meta property="og:description" content="�������ɣ�������̫��">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Fatart&#39;s blog">
<meta name="twitter:description" content="�������ɣ�������̫��">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>Fatart's blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Fatart's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2.1Reading Section -Tips/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Fatart's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2.1Reading Section -Tips/" itemprop="url">Reading Section</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-18T10:06:44+08:00">
                2017-08-18
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/TOEFL/" itemprop="url" rel="index">
                    <span itemprop="name">TOEFL</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>本节为<a href="https://courses.edx.org/courses/course-v1:ETSx+TOEFLx+3T2017/courseware/9826c1abf9a840afb74c9f0d55319dfc/2b1c21019ca34da3b550f8be8bbaba83/?child=first" target="_blank" rel="external">courses</a>课程第二周笔记</p>
<h1 id="Reading-Tips"><a href="#Reading-Tips" class="headerlink" title="Reading Tips"></a>Reading Tips</h1><p>There are several key skills that you’ll need to be successful in the Reading section. You should be able to: </p>
<ol>
<li><p><strong>Synthesize</strong> information presented in the text </p>
<p> This means that you can read chunks of text and identify main ideas being expressed. You should be able to draw connections between individual sentences and <strong>paraphrase</strong> the information that is presented.</p>
</li>
<li><p>Identify the author’s <strong>rhetorical</strong> purpose</p>
<p>When you read a piece of information, you should be able to understand why the author has included it. Is it an example of a phenomenon, a supporting detail for an argument, or perhaps the introduction of a new idea? Understanding the structure of each paragraph and the whole passage is critical to understanding its contents. </p>
</li>
<li><p>Scan the text to find specific pieces of information</p>
<p>In order to put together the big picture about what’s going on in a passage, you will also need to <strong>comprehend</strong> the little pieces that fit together to make that big picture. It is important to be able to quickly locate a sentence or portion of a paragraph that discusses a particular point. Once you’ve found that sentence, you can re-read it in order to understand exactly what is being expressed.</p>
</li>
<li><p>Understand academic vocabulary used in the passage</p>
<p>A newspaper or magazine article might use more everyday language—the sort of thing you hear in conversations and read in emails. But an academic text, regardless of the subject, contains certain vocabulary that is standard in academic <strong>discourse</strong>. There might be words related to presenting theories: “propose”, “hypothesis”, “scenario”. Or there could be words that connect two sentences: “however”, “in addition”, “thus”. A good reader should be familiar with this type of vocabulary.</p>
</li>
</ol>
<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><table>
<thead>
<tr>
<th>new words</th>
<th>pronunciation</th>
<th>meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>synthesize</td>
<td>/ˈsɪnθɪsaɪz/</td>
<td>to combine separate things into a complete whole</td>
</tr>
<tr>
<td>paraphrase</td>
<td>/ˈpærəfreɪz/</td>
<td>to express in a shorter, clearer, or different way what someone has said or written,syn=summarize</td>
</tr>
<tr>
<td>rhetorical</td>
<td>/rɪˈtɔːrɪkl/</td>
<td>If you ask a rhetorical question it means you don’t necessarily expect an answer, but you do want an occasion to talk about something.</td>
</tr>
<tr>
<td>comprehend</td>
<td>/ˌkɒmprɪˈhend/</td>
<td>to understand something that is complicated or difficult</td>
</tr>
<tr>
<td>discourse</td>
<td>/ˈdɪskɔːs /</td>
<td>a serious speech or piece of writing on a particular subject</td>
</tr>
<tr>
<td>hypothesis</td>
<td>/haɪˈpɒθəsɪs/</td>
<td>an idea that is suggested as an explanation for something, but that has not yet been proved to be true,syn=theory</td>
</tr>
</tbody>
</table>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/ns3 日志模块（Logging Module）的使用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Fatart's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/ns3 日志模块（Logging Module）的使用/" itemprop="url">ns3 日志模块(Logging Module)的使用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-17T21:28:25+08:00">
                2017-08-17
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/NS3/" itemprop="url" rel="index">
                    <span itemprop="name">NS3</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>详细内容请参考<a href="https://www.nsnam.org/docs/release/3.26/tutorial/html/tweaking.html" target="_blank" rel="external">ns-3 tutorial</a></p>
<h1 id="Logging总览"><a href="#Logging总览" class="headerlink" title="Logging总览"></a>Logging总览</h1><p>在一些情况下，只有错误信息才被记录到操作控制台（operator  console）。在其他的系统中，警告消息以及详细信息都会被输出。<br>ns-3考虑到了所有的冗余等级（verbosity level）都是有用的，所以提供了一个可选择的，多个等级的方法来进行消息日志。<br>日志功能可以完全逐个元件地关闭，开启，全部开启，并且提供了可选择的冗余等级。<br>ns-3同样提供了一个通用机制（general purpose mechanism）-tracing，用来从模型获得数据，tracing被推荐用来作为仿真的输出。</p>
<p>目前有其中不同的log 等级，以冗余等级（verbosity level）递增define 如下</p>
<table>
<thead>
<tr>
<th>Level</th>
<th>illustration</th>
</tr>
</thead>
<tbody>
<tr>
<td>LOG_ERROR</td>
<td>Log error messages (associated macro: NS_LOG_ERROR);</td>
</tr>
<tr>
<td>LOG_WARN</td>
<td>Log warning messages (associated macro: NS_LOG_WARN);</td>
</tr>
<tr>
<td>LOG_DEBUG</td>
<td>Log relatively rare, ad-hoc debugging messages (associated macro: NS_LOG_DEBUG);</td>
</tr>
<tr>
<td>LOG_INFO</td>
<td>Log informational messages about program progress (associated macro: NS_LOG_INFO);</td>
</tr>
<tr>
<td>LOG_FUNCTION</td>
<td>Log a message describing each function called (two associated macros:</td>
</tr>
<tr>
<td>LOG_LOGIC</td>
<td>Log messages describing logical flow within a function (associated macro: NS_LOG_LOGIC);</td>
</tr>
<tr>
<td>LOG_ALL</td>
<td>Log everything mentioned above (no associated macro)</td>
</tr>
</tbody>
</table>
<p>对于每一个LOG_TYPE，都与一个LOG_LEVEL_TYPE,作用是使能在其level以及之上的level.(as a consequence，LOG_ERROR 和LOG_LEVEL_ERROR在功能上是等价的（function equivalent），LOG_LEVEL_ALL和LOG_ALL同样也是)。</p>
<p><em>For example, enabling LOG_INFO will only enable messages provided by NS_LOG_INFO macro,<br>while enabling LOG_LEVEL_INFO will also enable messages provided by NS_LOG_DEBUG, NS_LOG_WARN and NS_LOG_ERROR macros。</em></p>
<p><strong>NS_LOG_UNCOND</strong> 无条件（unconditionally）记录相关信息（不和log level先关）。<br>每一个level都能够被单一的或累计请求并且日志能够使用一个shell 环境变量（NS_LOG）来设立或者通过日志系统函数调用。</p>
<h1 id="Enabling-Logging"><a href="#Enabling-Logging" class="headerlink" title="Enabling Logging"></a>Enabling Logging</h1><h2 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h2><p>运行以前的first1.cc</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ./waf --run scratch/myfirst</div></pre></td></tr></table></figure>
<p>得到和上一节相同的结果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$ Waf: Entering directory `/home/craigdo/repos/ns-3-allinone/ns-3-dev/build&apos;</div><div class="line">Waf: Leaving directory `/home/craigdo/repos/ns-3-allinone/ns-3-dev/build&apos;</div><div class="line">&apos;build&apos; finished successfully (0.413s)</div><div class="line">Sent 1024 bytes to 10.1.1.2</div><div class="line">Received 1024 bytes from 10.1.1.1</div><div class="line">Received 1024 bytes from 10.1.1.2</div></pre></td></tr></table></figure>
<p>Sent 和 Received 消息都是从 UdpEchoClientApplication和 UdpEchoServerApplication中获得，见以下代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">LogComponentEnable(&quot;UdpEchoClientApplication&quot;, LOG_LEVEL_INFO);</div></pre></td></tr></table></figure>
<h3 id="1-增加日志level，不去改变script代码和不要重新编译，设定-NS-LOG-环境变量如下"><a href="#1-增加日志level，不去改变script代码和不要重新编译，设定-NS-LOG-环境变量如下" class="headerlink" title="1. 增加日志level，不去改变script代码和不要重新编译，设定 NS_LOG 环境变量如下"></a>1. 增加日志level，不去改变script代码和不要重新编译，设定 NS_LOG 环境变量如下</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ export NS_LOG=UdpEchoClientApplication=level_all</div></pre></td></tr></table></figure>
<p>赋值号assignment左边的是我们想去设置的日志组件，右边是我们想要设置的attribute，在上一行代码中我们将去开启该应用的全部level。<br>如果你再次运行该script，ns-3的logging system将会采用这个改变然后你将会看到一下的输出。</p>
<h3 id="2-或上-prefix-func-语句来得到每一条语句输出的模块来源。"><a href="#2-或上-prefix-func-语句来得到每一条语句输出的模块来源。" class="headerlink" title="2. 或上 prefix_func 语句来得到每一条语句输出的模块来源。"></a>2. 或上 <em>prefix_func</em> 语句来得到每一条语句输出的模块来源。</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ export &apos;NS_LOG=UdpEchoClientApplication=level_all|prefix_func:UdpEchoServerApplication=level_all|prefix_func&apos;</div></pre></td></tr></table></figure>
<p>运行后会在echo client和server应用都输出日志消息。</p>
<h3 id="3-如果你想知道仿真的运行时间，你可以在shell中加入-prefix-time"><a href="#3-如果你想知道仿真的运行时间，你可以在shell中加入-prefix-time" class="headerlink" title="3. 如果你想知道仿真的运行时间，你可以在shell中加入 |prefix_time"></a>3. 如果你想知道仿真的运行时间，你可以在shell中加入 |prefix_time</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ export &apos;NS_LOG=UdpEchoClientApplication=level_all|prefix_func|prefix_time:</div><div class="line">               UdpEchoServerApplication=level_all|prefix_func|prefix_time&apos;</div></pre></td></tr></table></figure>
<h3 id="4-开启所有log细节，并保存到文档中，适合调试"><a href="#4-开启所有log细节，并保存到文档中，适合调试" class="headerlink" title="4. 开启所有log细节，并保存到文档中，适合调试"></a>4. 开启所有log细节，并保存到文档中，适合调试</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ export &apos;NS_LOG=*=level_all|prefix_func|prefix_time</div><div class="line">$ ./waf --run scratch/myfirst &gt; log.out 2&gt;&amp;1</div></pre></td></tr></table></figure>
<h2 id="Adding-Logging-to-your-code"><a href="#Adding-Logging-to-your-code" class="headerlink" title="Adding Logging to your code"></a>Adding Logging to your code</h2><p>由前面我们可以知道使用 NS_LOG 环境变量可以改变日志等级。我们在<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">NodeContainer nodes；</div></pre></td></tr></table></figure></p>
<p>代码前插入：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">NS_LOG_INFO (&quot;Creating Topology&quot;);</div></pre></td></tr></table></figure>
<p>然后build并清除之前的NS_LOG设定</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ ./waf</div><div class="line">$ export NS_LOG=</div></pre></td></tr></table></figure>
<p>运行代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ./waf --run scratch/myfirst</div></pre></td></tr></table></figure>
<p>运行后发现控制台并没有输出了我们自己定义的内容</p>
<h3 id="思考为什么在运行前需要加上以下代码？"><a href="#思考为什么在运行前需要加上以下代码？" class="headerlink" title="思考为什么在运行前需要加上以下代码？"></a>思考为什么在运行前需要加上以下代码？</h3><p>you will not see your new message since its associated logging component (FirstScriptExample) has not been enabled. In order to see your message you will have to enable the FirstScriptExample logging component with a level greater than or equal to NS_LOG_INFO. If you just want to see this particular level of logging, you can enable it by,</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ export NS_LOG=FirstScriptExample=info</div></pre></td></tr></table></figure>
<p>加上代码后，运行<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">Waf: Entering directory `/home/craigdo/repos/ns-3-allinone/ns-3-dev/build&apos;</div><div class="line">Waf: Leaving directory `/home/craigdo/repos/ns-3-allinone/ns-3-dev/build&apos;</div><div class="line">&apos;build&apos; finished successfully (0.404s)</div><div class="line">Creating Topology</div><div class="line">Sent 1024 bytes to 10.1.1.2</div><div class="line">Received 1024 bytes from 10.1.1.1</div><div class="line">Received 1024 bytes from 10.1.1.2</div></pre></td></tr></table></figure></p>
<p>运行后发现控制台输出了我们自己定义的内容</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/ns3 概念总览/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Fatart's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/ns3 概念总览/" itemprop="url">ns3仿真中的关键抽象</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-17T18:28:25+08:00">
                2017-08-17
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/NS3/" itemprop="url" rel="index">
                    <span itemprop="name">NS3</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>详细内容请参考<a href="https://www.nsnam.org/docs/release/3.26/tutorial/html/conceptual-overview.html#key-abstractions" target="_blank" rel="external">ns-3 tutorial</a></p>
<h1 id="Key-Abstraction"><a href="#Key-Abstraction" class="headerlink" title="Key Abstraction"></a>Key Abstraction</h1><p>在这一节中我们复习一下ns3中仿真的几个关键概念</p>
<h2 id="Node"><a href="#Node" class="headerlink" title="Node"></a>Node</h2><p>在ns3中最基本的计算设备称为：节点(node),在C++中用<em>Node</em>类抽象。<em>Node</em>类提供管理计算设备的方法。<br>你可以将Node想成是一个你能够增加功能的电脑。可以添加如（应用）Application，（协议栈）protocol stacks，带有驱动的外设卡（peripheral）使得电脑能够有效工作。</p>
<h2 id="Application"><a href="#Application" class="headerlink" title="Application"></a>Application</h2><p>ns-3应用（Application）运行在ns-3节点Node上驱动仿真。在C++中用<em>Application</em>类表示。我们将使用<em>UdpEchoClientApplication</em>以及<em>UdpEchoServerApplication</em>，用来产生（generate）并回传（echo）仿真网络数据包。</p>
<h2 id="Channel"><a href="#Channel" class="headerlink" title="Channel"></a>Channel</h2><p>用来连接<em>Node</em>的对象代表了一个通信信道，在C++中使用<em>Channel</em>表示。<em>Channel</em>可以管理通信子以及子网间的连接。一个Channel可以模拟简单的线wire，专用的Channel也可以对大型网络交换机，或者无线网络情况下充满障碍物的三位空间信道进行模拟。</p>
<h2 id="Net-Device"><a href="#Net-Device" class="headerlink" title="Net Device"></a>Net Device</h2><p>在ns3中，net device既包含软件驱动又包括硬件（如Network Devices-NICs）。用一句话概括Node，Channel，Net Device的关系：Node使用NetDevice发送packages通过channel传输到另一个node。在C++中使用<em>NetDevice</em>类表示，<em>NetDevice</em>用来管理<em>Node</em>和<em>Channel</em>对象的连接。当然，NetDevice和Channel的类型是相对应的，如<em>CsmaNetDevice</em>和<em>CsmaChannel</em>对应，<em>PointToPointNetDevice</em>和<em>PointToPointChannel</em>对应。</p>
<h2 id="Topology-Helper"><a href="#Topology-Helper" class="headerlink" title="Topology Helper"></a>Topology Helper</h2><p>比如将<em>NetDevices</em>和<em>Nodes</em>连接，<em>NetDevices</em>和<em>Channels</em>连接，分配IP地址等待，都是ns3中的常见操作，于是我们提供了<em>Topology Helper</em>来简化操作。</p>
<h2 id="A-First-ns-3-Script"><a href="#A-First-ns-3-Script" class="headerlink" title="A First ns-3 Script"></a>A First ns-3 Script</h2><p>文件地址： ns-3.26 -&gt;  examples -&gt; tutorial -&gt; first.cc</p>
<h3 id="Module-Includes"><a href="#Module-Includes" class="headerlink" title="Module Includes"></a>Module Includes</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">#include &quot;ns3/core-module.h&quot;</div><div class="line">#include &quot;ns3/network-module.h&quot;</div><div class="line">#include &quot;ns3/internet-module.h&quot;</div><div class="line">#include &quot;ns3/point-to-point-module.h&quot;</div><div class="line">#include &quot;ns3/applications-module.h&quot;</div></pre></td></tr></table></figure>
<p>确保在之前我们已经允许实行包括实例(examples)和测试（tests）的debug build。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ ./waf -d debug --enable-examples --enable-tests configure</div><div class="line">$ ./waf</div></pre></td></tr></table></figure>
<h3 id="Ns3-Namespace"><a href="#Ns3-Namespace" class="headerlink" title="Ns3 Namespace"></a>Ns3 Namespace</h3><p>namespace declaration</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">using namespace ns3;</div></pre></td></tr></table></figure>
<p>ns3工程在Cplusplus命名空间<em>ns3</em>中执行，就像我们通常在C++程序中使用std命名空间一样。</p>
<h3 id="Logging"><a href="#Logging" class="headerlink" title="Logging"></a>Logging</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">NS_LOG_COMPONENT_DEFINE (&quot;FirstScriptExample&quot;)</div></pre></td></tr></table></figure>
<p>我们可以在<a href="https://www.nsnam.org/docs/release/3.26/doxygen/index.html" target="_blank" rel="external">API Documentation</a> 中查看这条语句的意义 。<br>位置： Modules -&gt; Core -&gt; Debugging tools -&gt; Logging<br>在Logging中点击 More可以查看details,在Macros中可以找到 NS_LOG_COMPONENT_DEFINE的宏定义。<br>总的来说这个宏定义定义了一个叫做FirstScriptExample的logging component来使能/失能 控制台消息记录功能</p>
<h3 id="Main-Function"><a href="#Main-Function" class="headerlink" title="Main Function"></a>Main Function</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">int</div><div class="line">main (int argc, char *argv[])</div><div class="line">&#123;</div></pre></td></tr></table></figure>
<p>c++主函数（main function）声明</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Time::SetResolution (Time::NS);</div></pre></td></tr></table></figure>
<p>设置时间精度（resolution），只能够被改变一次，默认参数是 1ns （nanosecond）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">LogComponentEnable(&quot;UdpEchoClientApplication&quot;, LOG_LEVEL_INFO);</div><div class="line">LogComponentEnable(&quot;UdpEchoServerApplication&quot;, LOG_LEVEL_INFO);</div></pre></td></tr></table></figure>
<p>设置使能UDP Client和Echo Server内建的回显应用的日志组件，通过查看ns-3 doxygen文档，函数形式如下 void ns3::LogComponentEnable( char const* name, enum LogLevel level), name指的是 日志组件的名称（the log component name），level, 指的是日志的等级。每一个日志组件可以有许多level的日志等级（logging verbosity/detail）。在这两行中，设置UdpEchoClientApplication和UdpEchoServerApplication为LOG_LEVEL_INFO等级，如此设置之后，当包在仿真中发送和接收的时候，应用就能够在控制台输出日志消息。</p>
<h3 id="Topology-Helper-1"><a href="#Topology-Helper-1" class="headerlink" title="Topology Helper"></a>Topology Helper</h3><h4 id="NodeContainer"><a href="#NodeContainer" class="headerlink" title="NodeContainer"></a>NodeContainer</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">NodeContainer nodes;</div><div class="line">nodes.Create (2);</div></pre></td></tr></table></figure>
<p><a href="https://www.nsnam.org/docs/release/3.26/doxygen/classns3_1_1_node_container.html#details" target="_blank" rel="external">NodeContainer Detailed Description</a></p>
<p>第一行 声明（declare）一个叫做node的NodeContainer，第二行使用的node对象的Create函数来创建了两个Node对象，并在内部（internally）存储了指向这些对象的指针（我们可以使用NodeContainer的成员函数 Ptr<node> Get(uint32_t n) const来得到生成node的指针）。 </node></p>
<p>下一步我们要将创建的nodes连接起来，形成一个topology，两点之间最简单的连接形式就是点对点的链接。</p>
<h4 id="PointToPointHelper"><a href="#PointToPointHelper" class="headerlink" title="PointToPointHelper"></a>PointToPointHelper</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">PointToPointHelper pointToPoint;</div><div class="line">pointToPoint.SetDeviceAttribute (&quot;DataRate&quot;, StringValue (&quot;5Mbps&quot;));</div><div class="line">pointToPoint.SetChannelAttribute (&quot;Delay&quot;, StringValue (&quot;2ms&quot;));</div></pre></td></tr></table></figure>
<pre><code>在栈stack上例化(instantiate)PointToPointHelper的一个对象pointToPoint，告诉PointToPointHelper对象当创建一个PointToPointNetDevice对象时使用5Mbps作为DataRate参数（attribute),使用2ms作为点对点信道的传输延时（propagationdelay）。
</code></pre><p>也许我们会想pointToPoint.SetDeviceAttribute()，函数里面到底填什么<em>Attributes</em>。<br>在PointToPointNetDevice的<a href="https://www.nsnam.org/docs/release/3.26/doxygen/classns3_1_1_point_to_point_net_device.html" target="_blank" rel="external">Attributes</a>发现有MTU,Address,DataRate,ReceiveErrorModel,InterframeGap等可以作为pointToPoint.SetDeviceAttribute参数，同样的，在PointToPointChannel的API页面找到了Delay参数。</p>
<h4 id="NetDeviceContainer"><a href="#NetDeviceContainer" class="headerlink" title="NetDeviceContainer"></a>NetDeviceContainer</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">NetDeviceContainer devices;</div><div class="line">devices = pointToPoint.Install (nodes);</div></pre></td></tr></table></figure>
<p>就像我们使用NodeContainer topology helper的对象来创建nodes，我们使用P2PHelper来进行创建、配置、安装设备。<br>我们需要有创建好的NetDevice对象列表，所以我们使用一个NetDeviceContainer来包括他们，就像我们使用一个NodeContainer来包括我们创建的节点。<br>P2Phelper的Install函数使用nodecontainer作为一个参数。在内部，一个NetDeviceContainer被创建了。对于每一个NodeContainer的node（对于P2P link确切来说时两个）来说，一个P2PNetDevice被创建了并且保存在了device container中；一个P2PChannel也被创建了并附加上两个P2P NetDevice。当对象被P2PHelper被创建的时候，在helper以往设置的参数（attribute）被用来初始化被创建对象的相关attributes.</p>
<h4 id="InternetStackHelper"><a href="#InternetStackHelper" class="headerlink" title="InternetStackHelper"></a>InternetStackHelper</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">InternetStackHelper stack;</div><div class="line">stack.Install (nodes);</div></pre></td></tr></table></figure>
<p>The InternetStackHelper is a topology helper that is to internet stacks what the PointToPointHelper is to point-to-point net devices. The Install method takes a NodeContainer as a parameter. When it is executed, it will install an Internet Stack (TCP, UDP, IP, etc.) on each of the nodes in the node container….</p>
<h4 id="Ipv4AddressHelper"><a href="#Ipv4AddressHelper" class="headerlink" title="Ipv4AddressHelper"></a>Ipv4AddressHelper</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Ipv4AddressHelper address;</div><div class="line">address.SetBase (&quot;10.1.1.0&quot;, &quot;255.255.255.0&quot;);</div></pre></td></tr></table></figure>
<p>associate the devices on our nodes with IP addresses</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Ipv4InterfaceContainer interfaces = address.Assign (devices);</div></pre></td></tr></table></figure>
<p>执行真正的地址分配，使用I跑vInterface对象对device分配IP</p>
<p>当我们建立好了P2P网络，安装好了网络协议栈并分配了IP地址，我们需要Application来产生流量(traffic)。</p>
<h3 id="Application-1"><a href="#Application-1" class="headerlink" title="Application"></a>Application</h3><h4 id="UdpEchoServerHelper"><a href="#UdpEchoServerHelper" class="headerlink" title="UdpEchoServerHelper"></a>UdpEchoServerHelper</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">UdpEchoServerHelper echoServer (9);</div><div class="line"></div><div class="line">ApplicationContainer serverApps = echoServer.Install (nodes.Get (1));</div><div class="line">serverApps.Start (Seconds (1.0));</div><div class="line">serverApps.Stop (Seconds (10.0));</div></pre></td></tr></table></figure>
<p>第一行声明了一个UdpEchoServerHelper对象来帮助创建实际的application。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ns3::UdpEchoServerHelper::UdpEchoServerHelper	(uint16_t port)</div><div class="line">port	The port the server will wait on for incoming packets</div></pre></td></tr></table></figure>
<p>在API中使用构造函数Constructor来初始化对象，（端口）port参数为服务器等待数据包的端口号。</p>
<p>第二行创建了真正的底层（underlying）server对象并使用Install操作将server application和node结合起来。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ApplicationContainer ns3::UdpEchoServerHelper::Install	(Ptr&lt; Node &gt; node)	const</div></pre></td></tr></table></figure>
<p>Create a UdpEchoServerApplication on the specified Node.*</p>
<p><strong>Parameters</strong><br>   node    The node on which to create the Application. The node is specified by a Ptr<node>.<br><strong>Returns</strong><br>   An ApplicationContainer holding the Application created,</node></p>
<h4 id="UdpEchoClientHelper"><a href="#UdpEchoClientHelper" class="headerlink" title="UdpEchoClientHelper"></a>UdpEchoClientHelper</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">UdpEchoClientHelper echoClient (interfaces.GetAddress (1), 9);</div><div class="line">echoClient.SetAttribute (&quot;MaxPackets&quot;, UintegerValue (1));   </div><div class="line">echoClient.SetAttribute (&quot;Interval&quot;, TimeValue (Seconds (1.0)));</div><div class="line">echoClient.SetAttribute (&quot;PacketSize&quot;, UintegerValue (1024));</div><div class="line"></div><div class="line">ApplicationContainer clientApps = echoClient.Install (nodes.Get (0));</div><div class="line">clientApps.Start (Seconds (2.0));</div><div class="line">clientApps.Stop (Seconds (10.0));</div></pre></td></tr></table></figure>
<p>参数Attribute可以在<a href="https://www.nsnam.org/docs/release/3.26/doxygen/classns3_1_1_udp_echo_client.html" target="_blank" rel="external">UdpEchoClient</a>找到。</p>
<h3 id="Simulator"><a href="#Simulator" class="headerlink" title="Simulator"></a>Simulator</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Simulator::Run ();</div></pre></td></tr></table></figure>
<h2 id="思考"><a href="#思考" class="headerlink" title="思考"></a>思考</h2><p>我们之前调用过以下函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">serverApps.Start (Seconds (1.0));</div><div class="line">serverApps.Stop (Seconds (10.0));</div><div class="line">...</div><div class="line">clientApps.Start (Seconds (2.0));</div><div class="line">clientApps.Stop (Seconds (10.0));</div></pre></td></tr></table></figure>
<p>我们实际上在仿真时间1.0s,2.0s,10.0规划了事件。当Simulator::Run();被调用，系统将会浏览规划好的事件并且执行他们。第1.0s,将会执行echo server应用，server也可能规划许多其他事件。然后触发2.0s的client echo应用。</p>
<p>当所有代码规划和自动规划的事件都执行完了，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">  Simulator::Destroy ();</div><div class="line">  return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>如何运行一个程序</p>
<p>1、在 Eclipse中配置完 external tools 和 debug tools来运行</p>
<p>2、在shell中运行 命令来运行</p>
<p>将first.cc复制到 scratch文件夹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ cd ../..</div><div class="line">$ cp examples/tutorial/first.cc scratch/myfirst.cc</div></pre></td></tr></table></figure>
<p>Now build your first example script using waf:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ./waf</div></pre></td></tr></table></figure>
<p>then run</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ./waf --run scratch/myfirst</div></pre></td></tr></table></figure>
<p>You should see some output:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">Waf: Entering directory `/home/craigdo/repos/ns-3-allinone/ns-3-dev/build&apos;</div><div class="line">Waf: Leaving directory `/home/craigdo/repos/ns-3-allinone/ns-3-dev/build&apos;</div><div class="line">&apos;build&apos; finished successfully (0.418s)</div><div class="line">Sent 1024 bytes to 10.1.1.2</div><div class="line">Received 1024 bytes from 10.1.1.1</div><div class="line">Received 1024 bytes from 10.1.1.2</div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/Visual Studio Shortcut/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Fatart's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/Visual Studio Shortcut/" itemprop="url">Visual Studio Shortcut</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-15T20:46:25+08:00">
                2017-08-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/C/" itemprop="url" rel="index">
                    <span itemprop="name">C++</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <table>
<thead>
<tr>
<th>Shortcut</th>
<th>illustration</th>
</tr>
</thead>
<tbody>
<tr>
<td>Ctrl+T</td>
<td>By using the Go To feature (Ctrl+T) you can quickly get to where you need to go</td>
</tr>
<tr>
<td>Ctrl+G</td>
<td>Use the Ctrl+G shortcut to go to line xx</td>
</tr>
<tr>
<td>Alt+F12</td>
<td>Peek into definitions, use ESC to cancal</td>
</tr>
<tr>
<td>F12</td>
<td>GO directly to definition</td>
</tr>
</tbody>
</table>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/IO库/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Fatart's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/IO库/" itemprop="url">IO 库</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-15T20:46:25+08:00">
                2017-08-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/C/" itemprop="url" rel="index">
                    <span itemprop="name">C++</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>本节对应C++ Primer第八章</p>
<h1 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h1><p>C++通过定义在标准库中的类型来处理IO</p>
<table>
<thead>
<tr>
<th>说明</th>
<th>头文件</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>读写基本流类型</td>
<td>iostream</td>
<td>istream,wsitream</td>
</tr>
<tr>
<td></td>
<td></td>
<td>ostream,wostream</td>
</tr>
<tr>
<td></td>
<td></td>
<td>iostream</td>
</tr>
<tr>
<td>读写文件类型</td>
<td>fstream</td>
<td>ifstream,wifstream</td>
</tr>
<tr>
<td></td>
<td></td>
<td>ofstream,wofstream</td>
</tr>
<tr>
<td></td>
<td></td>
<td>fstream,wfstream</td>
</tr>
<tr>
<td>读写内存string</td>
<td>sstream</td>
<td>istringstream,wistringstream</td>
</tr>
<tr>
<td></td>
<td></td>
<td>ostringstream,wostringstream</td>
</tr>
<tr>
<td></td>
<td></td>
<td>stringstream,wstringstream</td>
</tr>
</tbody>
</table>
<p>tips：宽字符版本的类型和函数以w开始。类型之间为 <strong>继承机制(inheritance)</strong>，基类为istream,ostream,iostream</p>
<h1 id="IO条件状态"><a href="#IO条件状态" class="headerlink" title="IO条件状态"></a>IO条件状态</h1><p>IO类提供函数和标志用来判断流的<strong>条件状态(condition state)</strong></p>
<table>
<thead>
<tr>
<th>condition state</th>
<th>illustration</th>
</tr>
</thead>
<tbody>
<tr>
<td>strm::iostate</td>
<td>strm是一种IO类型，iOstate是一种机器相关类型，提供表达条件状态的完整功能</td>
</tr>
<tr>
<td>strm::badbit</td>
<td>strm::badbit 用来指示流崩溃</td>
</tr>
<tr>
<td>strm::failbit</td>
<td>strm::failbit 指示一个IO操作失败</td>
</tr>
<tr>
<td>strm::eofbit</td>
<td>指出流到达了文件结束</td>
</tr>
<tr>
<td>strm::goodbit</td>
<td>流未处于错误状态。此值保证为0</td>
</tr>
<tr>
<td>s.eof()</td>
<td>若流s的eofbit置位，返回true</td>
</tr>
<tr>
<td>s.fail()</td>
<td>failbit</td>
</tr>
<tr>
<td>s.bad()</td>
<td>badbit</td>
</tr>
<tr>
<td>s.good()</td>
<td>goodbit</td>
</tr>
<tr>
<td>s.clear()</td>
<td>将流s中所有条件状态位复位，将流的状态设置为有效，返回void</td>
</tr>
<tr>
<td>s.clear(flag)</td>
<td>根据给定的flags标志，将流s中对应条件状态位复位，flag类型为strm::iostate,返回void</td>
</tr>
<tr>
<td>s.setstate(flag)</td>
<td>将流s中对应条件状态位置位</td>
</tr>
<tr>
<td>s.rdstate()</td>
<td>返回流的当前条件状态，返回值类型strm::iostate</td>
</tr>
</tbody>
</table>
<p>例：使用cin.rdstate()获得流的当前条件状态，并复位failbit和badbit标志位</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cin.clear( cin.rdstate() &amp; ~cin.failbit &amp; ~cin.badbit);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">#include &lt;iostream&gt;</div><div class="line">using std::istream;</div><div class="line"></div><div class="line">istream&amp; func(istream &amp;is)</div><div class="line">&#123;</div><div class="line">    std::string buf;</div><div class="line">    while (is &gt;&gt; buf)</div><div class="line">        std::cout &lt;&lt; buf &lt;&lt; std::endl;</div><div class="line">    is.clear();</div><div class="line">    return is;</div><div class="line">&#125;</div><div class="line"></div><div class="line">int main()</div><div class="line">&#123;</div><div class="line">    istream&amp; is = func(std::cin);</div><div class="line">    std::cout &lt;&lt; is.rdstate() &lt;&lt; std::endl;</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Page 280. 后续内容感觉不太常用，暂时跳过。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/从图中扣除不规则图像/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Fatart's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/从图中扣除不规则图像/" itemprop="url">从图中扣出不规则图像</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-15T20:46:25+08:00">
                2017-08-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/PS/" itemprop="url" rel="index">
                    <span itemprop="name">PS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="常用快捷方式"><a href="#常用快捷方式" class="headerlink" title="常用快捷方式"></a>常用快捷方式</h1><table>
<thead>
<tr>
<th>快捷方式</th>
<th>function</th>
</tr>
</thead>
<tbody>
<tr>
<td>Ctrl+j</td>
<td>复制一层layer</td>
</tr>
<tr>
<td>钢笔工具+Alt</td>
<td>曲线直线更换</td>
</tr>
<tr>
<td>钢笔工具+Ctrl</td>
<td>锚点位置拖动</td>
</tr>
</tbody>
</table>
<h1 id="操作步骤"><a href="#操作步骤" class="headerlink" title="操作步骤"></a>操作步骤</h1><h3 id="1-打开文件"><a href="#1-打开文件" class="headerlink" title="1 打开文件"></a>1 打开文件</h3><p><img src="https://raw.githubusercontent.com/Fatart/Fatart.github.io/master/%E4%BB%8E%E5%9B%BE%E4%B8%AD%E6%89%A3%E9%99%A4%E4%B8%8D%E8%A7%84%E5%88%99%E5%9B%BE%E5%83%8F/1.png" alt="image"></p>
<h3 id="2-取消layer-0的锁定"><a href="#2-取消layer-0的锁定" class="headerlink" title="2 取消layer 0的锁定"></a>2 取消layer 0的锁定</h3><h3 id="3-利用钢笔工具-取得所要的不规则图像"><a href="#3-利用钢笔工具-取得所要的不规则图像" class="headerlink" title="3 利用钢笔工具 取得所要的不规则图像"></a>3 利用钢笔工具 取得所要的不规则图像</h3><p><img src="https://raw.githubusercontent.com/Fatart/Fatart.github.io/master/%E4%BB%8E%E5%9B%BE%E4%B8%AD%E6%89%A3%E9%99%A4%E4%B8%8D%E8%A7%84%E5%88%99%E5%9B%BE%E5%83%8F/2.png" alt="image"></p>
<h3 id="4-右击选区，选择-Make-Selection-Feather-Radius-羽化半径-0"><a href="#4-右击选区，选择-Make-Selection-Feather-Radius-羽化半径-0" class="headerlink" title="4 右击选区，选择 Make Selection,Feather Radius(羽化半径)=0"></a>4 右击选区，选择 Make Selection,Feather Radius(羽化半径)=0</h3><p><img src="https://raw.githubusercontent.com/Fatart/Fatart.github.io/master/%E4%BB%8E%E5%9B%BE%E4%B8%AD%E6%89%A3%E9%99%A4%E4%B8%8D%E8%A7%84%E5%88%99%E5%9B%BE%E5%83%8F/3.png" alt="image"><br><img src="https://raw.githubusercontent.com/Fatart/Fatart.github.io/master/%E4%BB%8E%E5%9B%BE%E4%B8%AD%E6%89%A3%E9%99%A4%E4%B8%8D%E8%A7%84%E5%88%99%E5%9B%BE%E5%83%8F/4.png" alt="image"></p>
<h3 id="5-选择反转选区"><a href="#5-选择反转选区" class="headerlink" title="5 选择反转选区"></a>5 选择反转选区</h3><p><img src="https://raw.githubusercontent.com/Fatart/Fatart.github.io/master/%E4%BB%8E%E5%9B%BE%E4%B8%AD%E6%89%A3%E9%99%A4%E4%B8%8D%E8%A7%84%E5%88%99%E5%9B%BE%E5%83%8F/5.png" alt="image"></p>
<h3 id="6-选中图层，按-Delete"><a href="#6-选中图层，按-Delete" class="headerlink" title="6 选中图层，按 Delete"></a>6 选中图层，按 Delete</h3><p><img src="https://raw.githubusercontent.com/Fatart/Fatart.github.io/master/%E4%BB%8E%E5%9B%BE%E4%B8%AD%E6%89%A3%E9%99%A4%E4%B8%8D%E8%A7%84%E5%88%99%E5%9B%BE%E5%83%8F/6.png" alt="image"><br><img src="https://raw.githubusercontent.com/Fatart/Fatart.github.io/master/%E4%BB%8E%E5%9B%BE%E4%B8%AD%E6%89%A3%E9%99%A4%E4%B8%8D%E8%A7%84%E5%88%99%E5%9B%BE%E5%83%8F/7.png" alt="image"></p>
<h3 id="7-设定合适的画布大小"><a href="#7-设定合适的画布大小" class="headerlink" title="7 设定合适的画布大小"></a>7 设定合适的画布大小</h3><p>Image -&gt; Canvas Size</p>
<h3 id="8-新建一层底层画布，并将Opacity设置为0"><a href="#8-新建一层底层画布，并将Opacity设置为0" class="headerlink" title="8 新建一层底层画布，并将Opacity设置为0"></a>8 新建一层底层画布，并将Opacity设置为0</h3><p><img src="https://raw.githubusercontent.com/Fatart/Fatart.github.io/master/%E4%BB%8E%E5%9B%BE%E4%B8%AD%E6%89%A3%E9%99%A4%E4%B8%8D%E8%A7%84%E5%88%99%E5%9B%BE%E5%83%8F/8.png" alt="image"></p>
<h3 id="9-删除最上层选区，并保存为PNG格式"><a href="#9-删除最上层选区，并保存为PNG格式" class="headerlink" title="9 删除最上层选区，并保存为PNG格式"></a>9 删除最上层选区，并保存为PNG格式</h3><p>最终我们便得到了一张无背景的不规则图像</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/1 TOEFL Introduction/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Fatart's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/1 TOEFL Introduction/" itemprop="url">TOEFL 介绍</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-15T13:06:44+08:00">
                2017-08-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/TOEFL/" itemprop="url" rel="index">
                    <span itemprop="name">TOEFL</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Test-Format"><a href="#Test-Format" class="headerlink" title="Test Format"></a>Test Format</h1><table>
<thead>
<tr>
<th style="text-align:center">Test Section</th>
<th style="text-align:center">Number of Questions</th>
<th style="text-align:center">Timing</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Reading</td>
<td style="text-align:center">3~4 passages, 12~14 questions each</td>
<td style="text-align:center">60~80 minutes</td>
</tr>
<tr>
<td style="text-align:center">Listening</td>
<td style="text-align:center">4~6 lectures, 6 questions each</td>
<td style="text-align:center">60~90 minutes</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center">2~3 conversations, 5 questions each</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">BREAK</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">Speaking</td>
<td style="text-align:center">6 tasks: 2 independent and 4 integrated</td>
<td style="text-align:center">20minutes</td>
</tr>
<tr>
<td style="text-align:center">Writing</td>
<td style="text-align:center">1 independent task</td>
<td style="text-align:center">30 minutes</td>
<td></td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center">1 integrated task</td>
<td style="text-align:center">20 minutes</td>
</tr>
</tbody>
</table>
<h1 id="Reading-Section"><a href="#Reading-Section" class="headerlink" title="Reading Section"></a>Reading Section</h1><table>
<thead>
<tr>
<th style="text-align:center">Length of each passage</th>
<th style="text-align:center">Number of passages and questions</th>
<th style="text-align:center">Timing</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Approximately 700 words</td>
<td style="text-align:center">3~4 passages, 12~14 questions each</td>
<td style="text-align:center">60~80 minutes</td>
</tr>
</tbody>
</table>
<h2 id="阅读文章的三种类型"><a href="#阅读文章的三种类型" class="headerlink" title="阅读文章的三种类型"></a>阅读文章的三种类型</h2><ul>
<li>解释说明型 exposition</li>
<li>立论型 argumentation</li>
<li>历史题材型 historical</li>
</ul>
<h2 id="文章结构"><a href="#文章结构" class="headerlink" title="文章结构"></a>文章结构</h2><ul>
<li>分类 classification</li>
<li>比较/对比 compare/contrast</li>
<li>原因/结果 cause/effect</li>
<li>问题/解决方法 problem/solution</li>
</ul>
<h1 id="Listening-section"><a href="#Listening-section" class="headerlink" title="Listening section"></a>Listening section</h1><table>
<thead>
<tr>
<th style="text-align:center">Listening Material</th>
<th style="text-align:center">Number of questions</th>
<th style="text-align:center">Timing</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">4~6 lectures,about 3~5 minutes long</td>
<td style="text-align:center">6 questions each</td>
<td style="text-align:center">60~90 minutes</td>
</tr>
<tr>
<td style="text-align:center">about 500~800 words</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">2~3 conversations, each about 3 minutes</td>
<td style="text-align:center">5 questions each</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">about 12~25 exchanges</td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
<h1 id="Speaking-Task-Types"><a href="#Speaking-Task-Types" class="headerlink" title="Speaking Task Types"></a>Speaking Task Types</h1><h2 id="Indepedent-Tasks"><a href="#Indepedent-Tasks" class="headerlink" title="Indepedent Tasks"></a>Indepedent Tasks</h2><table>
<thead>
<tr>
<th>Task type</th>
<th>task description</th>
<th>Timing</th>
</tr>
</thead>
<tbody>
<tr>
<td>1. Personal Preference</td>
<td>express and defend a personal choice</td>
<td>Preparation time 15 seconds</td>
</tr>
<tr>
<td></td>
<td>from a given category</td>
<td>Response time 45 seconds</td>
</tr>
<tr>
<td>2. Choice</td>
<td>make and defend a personal choice between</td>
<td>Preparation time 15 seconds</td>
</tr>
<tr>
<td></td>
<td>two contrasting behaviors or courses of action</td>
<td>Response time 45 seconds</td>
</tr>
</tbody>
</table>
<h2 id="Integrated-Tasks"><a href="#Integrated-Tasks" class="headerlink" title="Integrated Tasks"></a>Integrated Tasks</h2><h3 id="Read-Listen-Speak"><a href="#Read-Listen-Speak" class="headerlink" title="Read/Listen/Speak"></a>Read/Listen/Speak</h3><table>
<thead>
<tr>
<th style="text-align:left">Task type</th>
<th style="text-align:left">task description</th>
<th style="text-align:left">Timing</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">3.Campus Situation</td>
<td style="text-align:left">1. A reading passage presents a campus-related issue</td>
<td style="text-align:left">Preparation time 30s</td>
</tr>
<tr>
<td style="text-align:left">Topic: Fit and Explain</td>
<td style="text-align:left">2. A Listening passage comments on the issus</td>
<td style="text-align:left">Response time 60s</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left">3. test maker summarize</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">4.Academic Course</td>
<td style="text-align:left">1. A reading passage broadly defines a term</td>
<td style="text-align:left">Preparation time 30s</td>
</tr>
<tr>
<td style="text-align:left">Topic: General/Specific</td>
<td style="text-align:left">2. An excerpt illustrate the term</td>
<td style="text-align:left">Response time 60s</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left">3. combine and convey important information</td>
</tr>
</tbody>
</table>
<h3 id="Listen-Speak"><a href="#Listen-Speak" class="headerlink" title="Listen/Speak"></a>Listen/Speak</h3><table>
<thead>
<tr>
<th style="text-align:left">Task type</th>
<th style="text-align:left">task description</th>
<th style="text-align:left">Timing</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">5.Campus Situation</td>
<td style="text-align:left">1. A conversation about problem and two solution</td>
<td style="text-align:left">Preparation time 20s</td>
</tr>
<tr>
<td style="text-align:left">Topic: Problem/Solution</td>
<td style="text-align:left">2. demenstrate an understanding of problem</td>
<td style="text-align:left">Response time 60s</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left">and express an opinion about solving it</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">6.Academic Course</td>
<td style="text-align:left">1. A listening excerpt explains a term or concept</td>
<td style="text-align:left">Preparation time 20s</td>
</tr>
<tr>
<td style="text-align:left">Topic: Summary</td>
<td style="text-align:left">and gives concrete examples to illustrate</td>
<td style="text-align:left">Response time 60s</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left">2. To summarize the lecture and demenstrate an understanding</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left">of the relationship bewteen examples and the overall topic</td>
</tr>
</tbody>
</table>
<h1 id="Writing"><a href="#Writing" class="headerlink" title="Writing"></a>Writing</h1><h2 id="综合写作-：Read-Listen-Writing"><a href="#综合写作-：Read-Listen-Writing" class="headerlink" title="综合写作 ：Read/Listen/Writing"></a>综合写作 ：Read/Listen/Writing</h2><p>从听到和看到的内容组织写作</p>
<ul>
<li>Test takers read a short text of about 230-300 words(reading time, 3 minutes) on an academic topic</li>
<li>Test takers may take notes on the reading passage.</li>
<li>The reading passage disappears from the screen during the lecture that follows</li>
<li>It reappears when test takers begin writing so they can refer to it as they work</li>
<li>Test taker listen to a speaker discuss the same topic from a different perspective. </li>
<li>The listening passage provides additional information that relates to points made in the reading passage</li>
<li>Test taker writes a summary in connected English prose of important points made in the listening passage, and explain how these relate to the key points of the reading passages.Sugested response length is 150~225 words; however,there is no penalty for writing more as long as it is in response to the task presented.</li>
<li>Response time: 20 minutes</li>
</ul>
<h2 id="独立写作"><a href="#独立写作" class="headerlink" title="独立写作"></a>独立写作</h2><p>使用自己的知识和经历写作</p>
<ul>
<li>Test taker write an essay that states, explains, and supports their opinion on an issue. An effective essay will usually contain a minimum of 300 words; however, test taker may write more if they wish.</li>
<li>Test taker must support their opinion or choices rather than simply list personal preferences or choices.</li>
<li>Typical essay questions begin with statements such as:<br>– Do you agress or disagree with the following statements? Use reasons and specific details to suppport your answer.<br>– Some people believe X. Other people believe Y. Which of these two positions do you prefer/agree with? Give reasons and specific details</li>
<li>Response time: 30 minutes</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/C++ 类的静态成员/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Fatart's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/C++ 类的静态成员/" itemprop="url">C++ 类的静态成员</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-14T20:46:25+08:00">
                2017-08-14
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/C/" itemprop="url" rel="index">
                    <span itemprop="name">C++</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>类的静态成员是和类的<strong>本身</strong>直接相关，而不是与类的各个对象保持关联，所以我们可以将类的静态成员看成是和类相关的一个全局变量，每一个类的对象又有各自的成员变量，但类的静态成员是<strong>唯一</strong>的。</p>
<h2 id="声明静态成员"><a href="#声明静态成员" class="headerlink" title="声明静态成员"></a>声明静态成员</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">class Account&#123;</div><div class="line">    public:</div><div class="line">        void calculate() &#123;amount += amount * interestRate;&#125;</div><div class="line">        static double rate() &#123;return interestRate;&#125;</div><div class="line">        static void rate(double);</div><div class="line">    private:</div><div class="line">        std::string owner;          //每一个对象拥有一个</div><div class="line">        double amount;              //每一个对象拥有一个</div><div class="line">        static double interestRate; //一个类拥有一个</div><div class="line">        static double initRate();</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="静态成员变量"><a href="#静态成员变量" class="headerlink" title="静态成员变量"></a>静态成员变量</h3><p>在类成员声明之前，加上 static 关键字。</p>
<h3 id="静态成员函数"><a href="#静态成员函数" class="headerlink" title="静态成员函数"></a>静态成员函数</h3><p>：不能声明成const类型，不能在函数体内使用this指针</p>
<h2 id="使用类的静态成员"><a href="#使用类的静态成员" class="headerlink" title="使用类的静态成员"></a>使用类的静态成员</h2><h3 id="1-使用类作用域运算符直接访问静态成员"><a href="#1-使用类作用域运算符直接访问静态成员" class="headerlink" title="1. 使用类作用域运算符直接访问静态成员"></a>1. 使用类作用域运算符直接访问静态成员</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">double r;</div><div class="line">r = Account::rate();</div></pre></td></tr></table></figure>
<h3 id="2-使用类的对象，指针，引用访问静态成员"><a href="#2-使用类的对象，指针，引用访问静态成员" class="headerlink" title="2. 使用类的对象，指针，引用访问静态成员"></a>2. 使用类的对象，指针，引用访问静态成员</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Account ac1;</div><div class="line">Account *ac2 = &amp; ac1;</div><div class="line">r = ac1.rate();</div><div class="line">r = ac2-&gt;rate();</div></pre></td></tr></table></figure>
<h3 id="3-类的成员函数访问静态成员"><a href="#3-类的成员函数访问静态成员" class="headerlink" title="3. 类的成员函数访问静态成员"></a>3. 类的成员函数访问静态成员</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">public:</div><div class="line">        void calculate() &#123;amount += amount * interestRate;&#125;</div></pre></td></tr></table></figure>
<p>interestRate是静态成员变量，成员函数直接使用，无需作用域运算符</p>
<h2 id="静态成员类外初始化"><a href="#静态成员类外初始化" class="headerlink" title="静态成员类外初始化"></a>静态成员类外初始化</h2><p>一般来说，静态数据成员不属于类的任何一个对象，所以他们并不是在创建类的对象时被定义的（其不能够被类的构造函数初始化），所以一般：类内声明静态成员，类外定义</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">1. 类内声明</div><div class="line">   static double interestRate; //一个类拥有一个</div><div class="line">2. 类外定义</div><div class="line">   double Account::interestRate = 1.0;</div></pre></td></tr></table></figure>
<p>完整的代码如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">class Account </div><div class="line">&#123;</div><div class="line">public:</div><div class="line">	void calculate() &#123; amount += amount * interestRate; &#125;</div><div class="line">	static double rate() &#123; return interestRate; &#125;</div><div class="line">	static void rate(double);</div><div class="line">private:</div><div class="line">	std::string owner;          //每一个对象拥有一个</div><div class="line">	double amount;              //每一个对象拥有一个</div><div class="line">	static double interestRate; //一个类拥有一个</div><div class="line">	//static double initRate();</div><div class="line">&#125;;</div><div class="line"></div><div class="line">void Account::rate(double newRate)</div><div class="line">&#123;</div><div class="line">	interestRate = newRate;</div><div class="line">&#125;</div><div class="line"></div><div class="line">double Account::interestRate = 1.0;</div></pre></td></tr></table></figure>
<p>如果在上述代码中少了最后一行的类外静态成员变量定义，编译将会出错。</p>
<h2 id="静态成员类内初始化"><a href="#静态成员类内初始化" class="headerlink" title="静态成员类内初始化"></a>静态成员类内初始化</h2><p>一般来说，关于C++类静态成员类外的初始化，并不会让人感到难以理解，但是提到C++静态成员的”类内初始化”那就容易迷糊了，静态成员变量不是只能类内声明吗，如何初始化？</p>
<p>  我们来看下面的代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">//example.h </div><div class="line">#include&lt;iostream&gt;</div><div class="line">#include&lt;vector&gt;</div><div class="line">using namespace std;</div><div class="line">class Example&#123; </div><div class="line">public: </div><div class="line">    static double rate = 6.5;</div><div class="line">    static const int vecSize = 20;</div><div class="line">    static vector&lt;double&gt; vec(vecSize); </div><div class="line">&#125;; </div><div class="line"></div><div class="line">//example.cpp</div><div class="line">#include &quot;example.h&quot; </div><div class="line">double Example::rate;</div><div class="line">vector&lt;double&gt; Example::vec;</div></pre></td></tr></table></figure>
<h3 id="代码分析"><a href="#代码分析" class="headerlink" title="代码分析"></a>代码分析</h3><p>我们需要判断上面的静态数据成员的声明和定义有没有错误，并解释原因。</p>
<p>首先，要谨记：通常情况下，<strong>不</strong>应该在类内部初始化成员，无论是否为静态成员。</p>
<p>其次，若一定要在类内初始化静态成员，那么就必须满足如下条件才行：</p>
<h3 id="类内初始化条件"><a href="#类内初始化条件" class="headerlink" title="类内初始化条件"></a>类内初始化条件</h3><h4 id="1-静态成员的类型必须为字面值常量类型的constexpr。"><a href="#1-静态成员的类型必须为字面值常量类型的constexpr。" class="headerlink" title="1. 静态成员的类型必须为字面值常量类型的constexpr。"></a>1. 静态成员的类型必须为字面值常量类型的constexpr。</h4><p>   所谓的字面值类型就是通常遇到的：算术类型，引用，指针等。</p>
<p>   字面值常量类型就是const型的算术类型，引用，指针等。</p>
<p>   所谓的constexpr，就是常量表达式，指<strong>值不会改变且在编译过程中就能得到计算结果的表达式</strong>。比如字面值，或者用常量表达式初始化的const对象也是常量表达式。为了帮助用户检查自己声明/定义的变量的值是否为一个常量表达式，C++11新规定，允许将变量声明为constexpr类型，以便由编译器来进行验证变量是否为常量表达式。</p>
<h4 id="2-给静态成员提供的初始值，必须为常量表达式"><a href="#2-给静态成员提供的初始值，必须为常量表达式" class="headerlink" title="2. 给静态成员提供的初始值，必须为常量表达式"></a>2. 给静态成员提供的初始值，必须为常量表达式</h4><p>有了这两条原则，我们就可以对上面的代码进行验证了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">1)static double rate = 6.5;</div></pre></td></tr></table></figure>
<p>不满足(1)，rate不是字面值常量类型，可以改成</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">static constexpr double rate = 6.5</div></pre></td></tr></table></figure>
<p>ps: 如果我们不再这里加入constexprt修饰符的话，编译器会提示错误<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">：error: ‘constexpr’ needed for in-class initialization of static data member ‘const double Example::rate’ of non-integral type [-fpermissive]</div></pre></td></tr></table></figure></p>
<p>大体意思就是，对于非const整数类型的初始值，如果它是常量表达式的话，我们需要手工在前面添加修饰符constexprt。<br>至于Example.cpp文件中的定义部分，由于我们已经在类内部进行了初始化，就不需要再在类外部进行定义了。如果非要定义的话，必须采用如下格式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">//example.cpp</div><div class="line">constexpr const double Example::rate;</div></pre></td></tr></table></figure>
<p>其中的const是可以删除的，因为constexprt本身就包含了const</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">2)static const int vecSize = 20;</div></pre></td></tr></table></figure>
<p>vecSize是const int类型的，且为常量表达式——满足第一条；提供的初始值为20，是一个常量表达式——满足第二条！且由于是const int型的，前面可以不用修饰符constexpr</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">3）static vector&lt;double&gt; vec(vecSize);</div></pre></td></tr></table></figure>
<p>错误！vector是模板不是字面值常量类型，所以不满足第一条。应该改为<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">static vector&lt;double&gt; vec;</div></pre></td></tr></table></figure></p>
<p> //仅仅且只能进行声明，不能定义<br>然后在Example.cpp中进行定义：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">static vector&lt;double&gt; vec(Example::vecSize);</div></pre></td></tr></table></figure>
<p>现在我们可以在Example.cpp中添加测试代码进行测试了：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">#include &quot;example.h&quot; </div><div class="line">vector&lt;double&gt; Example::vec(Example::vecSize);  constexpr const double Example::rate; </div><div class="line">int main()&#123; </div><div class="line">Example::vec.push_back(10.5); </div><div class="line">cout &lt;&lt; Example::vec.back() &lt;&lt; endl; </div><div class="line">cout &lt;&lt; Example::rate &lt;&lt; endl; </div><div class="line">cout &lt;&lt; Example::vecSize &lt;&lt; endl; </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>执行结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">10.5 </div><div class="line">6.5 </div><div class="line">20</div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="" />
          <p class="site-author-name" itemprop="name"></p>
           
              <p class="site-description motion-element" itemprop="description">�������ɣ�������̫��</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">8</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">4</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">7</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder"></span>

  
</div>


  <div class="powered-by">
    由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
  </div>

  <span class="post-meta-divider">|</span>

  <div class="theme-info">
    主题 &mdash;
    <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
      NexT.Mist
    </a>
  </div>


        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  

  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  








  





  

  

  

  

  

  

</body>
</html>
